# 1、定义一个对所有用户都生效的命令别名，例如：lftps='lftp 172.168.0.1/pub'

`~]# echo "alias lftps='lftp 172.168.0.1/pub'" >> /etc/bashrc`

`~]# source /etc/bashrc`



> ```shell
> [root@localhost ~]# echo "alias lftps='lftp 172.168.0.1/pub'" >> /etc/bashrc 
> [root@localhost ~]# tail -1 /etc/bashrc
> alias lftps='lftp 172.168.0.1/pub'
> [root@localhost ~]# source /etc/bashrc
> [root@localhost ~]# alias 
> alias cp='cp -i'
> alias egrep='egrep --color=auto'
> alias fgrep='fgrep --color=auto'
> alias grep='grep --color=auto'
> alias l.='ls -d .* --color=auto'
> alias lftps='lftp 172.168.0.1/pub'
> alias ll='ls -l --color=auto'
> alias ls='ls --color=auto'
> alias mv='mv -i'
> alias rm='rm -i'
> alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'
> [root@localhost ~]# lftps
> cd `ftp://172.168.0.1/pub' [Connecting...]
> Interrupt                                     
> [root@localhost ~]#
> [root@localhost ~]# su - hadoop
> [hadoop@localhost ~]$ whoami 
> hadoop
> [hadoop@localhost ~]$ alias 
> alias egrep='egrep --color=auto'
> alias fgrep='fgrep --color=auto'
> alias grep='grep --color=auto'
> alias l.='ls -d .* --color=auto'
> alias lftps='lftp 172.168.0.1/pub'
> alias ll='ls -l --color=auto'
> alias ls='ls --color=auto'
> alias vi='vim'
> alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'
> [hadoop@localhost ~]$ lftps
> cd `ftp://172.168.0.1/pub' [Connecting...]
> Interrupt                                     
> [hadoop@localhost ~]$ 
> 
> ```



# 2、显示/etc/passwd文件中不以/bin/bash结尾的行

`~]# grep -v "/bin/bash$" /etc/passwd`

> ```shell
> [root@localhost ~]# grep -v "/bin/bash$" /etc/passwd
> bin:x:1:1:bin:/bin:/sbin/nologin
> daemon:x:2:2:daemon:/sbin:/sbin/nologin
> adm:x:3:4:adm:/var/adm:/sbin/nologin
> lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
> sync:x:5:0:sync:/sbin:/bin/sync
> shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
> halt:x:7:0:halt:/sbin:/sbin/halt
> mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
> operator:x:11:0:operator:/root:/sbin/nologin
> games:x:12:100:games:/usr/games:/sbin/nologin
> ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
> nobody:x:99:99:Nobody:/:/sbin/nologin
> avahi-autoipd:x:170:170:Avahi IPv4LL Stack:/var/lib/avahi-autoipd:/sbin/nologin
> dbus:x:81:81:System message bus:/:/sbin/nologin
> polkitd:x:999:998:User for polkitd:/:/sbin/nologin
> abrt:x:173:173::/etc/abrt:/sbin/nologin
> sssd:x:998:997:User for sssd:/:/sbin/nologin
> colord:x:997:995:User for colord:/var/lib/colord:/sbin/nologin
> ntp:x:38:38::/etc/ntp:/sbin/nologin
> libstoragemgmt:x:996:994:daemon account for libstoragemgmt:/var/run/lsm:/sbin/nologin
> rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
> rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin
> usbmuxd:x:113:113:usbmuxd user:/:/sbin/nologin
> chrony:x:995:993::/var/lib/chrony:/sbin/nologin
> rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin
> nfsnobody:x:65534:65534:Anonymous NFS User:/var/lib/nfs:/sbin/nologin
> mysql:x:27:27:MariaDB Server:/var/lib/mysql:/sbin/nologin
> tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
> pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin
> gdm:x:42:42::/var/lib/gdm:/sbin/nologin
> postfix:x:89:89::/var/spool/postfix:/sbin/nologin
> sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
> tcpdump:x:72:72::/:/sbin/nologin
> tom:x:5001:1003::/tmp/tom:/bin/zsh
> [root@localhost ~]# 
> 
> ```



# 3、找出/etc/passwd文件中，包含二位数字或者三位数的行

`~]# grep "\<[0-9]\{2,3\}\>" /etc/passwd`

> ```shell
> [root@localhost ~]# grep "\<[0-9]\{2,3\}\>" /etc/passwd
> mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
> operator:x:11:0:operator:/root:/sbin/nologin
> games:x:12:100:games:/usr/games:/sbin/nologin
> ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
> nobody:x:99:99:Nobody:/:/sbin/nologin
> avahi-autoipd:x:170:170:Avahi IPv4LL Stack:/var/lib/avahi-autoipd:/sbin/nologin
> dbus:x:81:81:System message bus:/:/sbin/nologin
> polkitd:x:999:998:User for polkitd:/:/sbin/nologin
> abrt:x:173:173::/etc/abrt:/sbin/nologin
> sssd:x:998:997:User for sssd:/:/sbin/nologin
> colord:x:997:995:User for colord:/var/lib/colord:/sbin/nologin
> ntp:x:38:38::/etc/ntp:/sbin/nologin
> libstoragemgmt:x:996:994:daemon account for libstoragemgmt:/var/run/lsm:/sbin/nologin
> rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
> rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin
> usbmuxd:x:113:113:usbmuxd user:/:/sbin/nologin
> chrony:x:995:993::/var/lib/chrony:/sbin/nologin
> rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin
> mysql:x:27:27:MariaDB Server:/var/lib/mysql:/sbin/nologin
> tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
> pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin
> gdm:x:42:42::/var/lib/gdm:/sbin/nologin
> postfix:x:89:89::/var/spool/postfix:/sbin/nologin
> sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
> tcpdump:x:72:72::/:/sbin/nologin
> [root@localhost ~]#
> 
> ```

 

# 4、显示/proc/meminfo文件中以大写或小写S开头的行；用三种方式实现

`~]# grep -i "^s" /proc/meminfo`
`~]# grep "^[Ss]" /proc/meminfo`
`~]# grep -E "^(S|s)" /proc/meminfo`

> ```shell
> [root@localhost ~]# grep -i "^s" /proc/meminfo 
> SwapCached:           44 kB
> SwapTotal:       2097148 kB
> SwapFree:        2096972 kB
> Shmem:             13280 kB
> Slab:             197140 kB
> SReclaimable:     133152 kB
> SUnreclaim:        63988 kB
> [root@localhost ~]# grep "^[Ss]" /proc/meminfo 
> SwapCached:           44 kB
> SwapTotal:       2097148 kB
> SwapFree:        2096972 kB
> Shmem:             13280 kB
> Slab:             197140 kB
> SReclaimable:     133152 kB
> SUnreclaim:        63988 kB
> [root@localhost ~]# grep -E "^(S|s)" /proc/meminfo 
> SwapCached:           44 kB
> SwapTotal:       2097148 kB
> SwapFree:        2096972 kB
> Shmem:             13280 kB
> Slab:             197140 kB
> SReclaimable:     133152 kB
> SUnreclaim:        63988 kB
> [root@localhost ~]# 
> 
> ```



# 5、使用echo输出一个绝对路径，使用egrep取出路径名，类型执行dirname /etc/passwd的结果

`~]# echo /etc/passwd | egrep -o ".*/" | egrep -o ".*[^/]"`

> ```shell
> [root@localhost ~]# echo /etc/passwd | egrep -o ".*/" | egrep -o ".*[^/]"
> /etc
> [root@localhost ~]# dirname /etc/passwd
> /etc
> [root@localhost ~]# echo /etc/sysconfig/network-scripts/ifcfg-eno16777736  | egrep -o ".*/" | egrep -o ".*[^/]"
> /etc/sysconfig/network-scripts
> [root@localhost ~]# dirname /etc/sysconfig/network-scripts/ifcfg-eno16777736 
> /etc/sysconfig/network-scripts
> [root@localhost ~]#
> 
> ```



# 6、找出ifconfig中的ip地址。要求结果只显示IP地址

`~]# ifconfig | grep "inet\>" | head -1 | cut -d' ' -f10`

> ```shell
> [root@localhost ~]# ifconfig 
> eno16777736: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
>         inet 10.20.0.26  netmask 255.255.255.0  broadcast 10.20.0.255
>         inet6 fe80::20c:29ff:fe58:b51e  prefixlen 64  scopeid 0x20<link>
>         ether 00:0c:29:58:b5:1e  txqueuelen 1000  (Ethernet)
>         RX packets 2121388  bytes 133225719 (127.0 MiB)
>         RX errors 0  dropped 0  overruns 0  frame 0
>         TX packets 52307  bytes 7400712 (7.0 MiB)
>         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
> 
> lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
>         inet 127.0.0.1  netmask 255.0.0.0
>         inet6 ::1  prefixlen 128  scopeid 0x10<host>
>         loop  txqueuelen 0  (Local Loopback)
>         RX packets 0  bytes 0 (0.0 B)
>         RX errors 0  dropped 0  overruns 0  frame 0
>         TX packets 0  bytes 0 (0.0 B)
>         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
> [root@localhost ~]# ifconfig | grep "inet\>" | head -1 | cut -d' ' -f10
> 10.20.0.26
> [root@localhost ~]# 
>         
> ```



# 7、vim定制自动缩进四个字符

`~]# vim ~/.vimrc`

​	`set tabstop=4`

​	`set ai`

`:wq`

**注：`~/.vimrc` 只对个人用户有效；如果需要全局有效，则需要对`/etc/vimrc`进行配置**



# 8、编写脚本，实现自动添加三个用户，并计算这三个用户的uid之和

`~]# vim user_test.sh`

`#!/bin/bash`

`useradd USERNAME1`
`useradd USERNAME2`
`useradd USERNAME3`

`echo $( id USERNAME1 )`
`echo`
`echo $( id USERNAME2 )`
`echo`
`echo $( id USERNAME3 )`

`USERNAME1_uid=$( id -u USERNAME1 )`
`USERNAME2_uid=$( id -u USERNAME2 )`
`USERNAME3_uid=$( id -u USERNAME3 )`

`SUM=$[ $USERNAME1_uid+$USERNAME2_uid+$USERNAME3_uid ]`
`echo`
`echo "uid_sum=$SUM"`

`:wq`

> ```shell
> [root@localhost ~]# vim user_test.sh
> [root@localhost ~]# chmod +x user_test.sh 
> [root@localhost ~]# ./user_test.sh
> uid=5010(USERNAME1) gid=5010(USERNAME1) groups=5010(USERNAME1)
> 
> uid=5011(USERNAME2) gid=5011(USERNAME2) groups=5011(USERNAME2)
> 
> uid=5012(USERNAME3) gid=5012(USERNAME3) groups=5012(USERNAME3)
> 
> uid_sum=15033
> [root@localhost ~]# 
> 
> ```

 

# 9、find用法以及常用用法的实例演示

**find：**

​		**实时查找工具，通过遍历指定起始路径下文件系统层级结构完成文件查找；**

- ### 工作特性：

  ​			

  ```
  	查找速度略慢；
  	精确查找；
  	实时查找；
  ```

  

- ### 用法：

  ​			

  ```
  find [OPTIONS] [查找起始路径] [查找条件] [处理动作]
  
  	查找起始路径：指定具体搜索目标起始路径；默认为当前目录；
  	查找条件：指定的查找标准，可以根据文件名、大小、类型、从属关系、权限等等标准进行；默认为找出指定路径下的所有文件；
  	处理动作：对符合查找条件的文件做出的操作，例如删除等操作；默认为输出至标准输出；
  ```

  



- ### 查找条件：

  ​				表达式：选项和测试

#### 根据文件名查找：

​				

```
-name "pattern"
-iname "pattern": 不区分大小写；
	支持glob风格的通配符；
		*,?,[],[^]

-regex pattern: 基于正则表达式模式查找文件，匹配是整个路径，而非其名；
```



> ```shell
> [root@localhost ~]# find /etc -name "passwd"
> /etc/passwd
> /etc/pam.d/passwd
> [root@localhost ~]# find /etc -iname "passwd"
> /etc/passwd
> /etc/pam.d/passwd
> [root@localhost ~]# mkdir /etc/test
> [root@localhost ~]# touch /etc/test/Passwd
> [root@localhost ~]# touch /etc/test/MPASSWD.txt
> [root@localhost ~]# find /etc -iname "passwd"
> /etc/passwd
> /etc/pam.d/passwd
> /etc/test/Passwd
> [root@localhost ~]# find /etc -name "passwd"
> /etc/passwd
> /etc/pam.d/passwd
> [root@localhost ~]# find /etc -iname "passwd*"
> /etc/passwd
> /etc/passwd-
> /etc/pam.d/passwd
> /etc/test/Passwd
> [root@localhost ~]# touch /etc/test/npasswd
> [root@localhost ~]# touch /etc/test/npasswdo
> [root@localhost ~]# find /etc -iname "*passwd"
> /etc/passwd
> /etc/security/opasswd
> /etc/pam.d/passwd
> /etc/test/Passwd
> /etc/test/npasswd
> [root@localhost ~]# find /etc -iname "passwd?"
> /etc/passwd-
> [root@localhost ~]# find /etc -iname "?passwd"
> /etc/security/opasswd
> /etc/test/npasswd
> [root@localhost ~]# touch /etc/test/passwdx
> [root@localhost ~]# find /etc -iname "passwd?"
> /etc/passwd-
> /etc/test/passwdx
> [root@localhost ~]# find /etc -iname "passwd[[:alnum:]]"
> /etc/test/passwdx
> [root@localhost ~]#
> 
> ```

 

#### 根据文件从属关系查找：



```
-user USERNAME: 查找属主指定用户的所有文件；
-group GRPNAME: 查找属组为指定组的所有文件；

-uid UID: 查找属主指定UID的所有文件；
-gid GID: 查找属组指定的GID的所有文件；

-nouser: 查找没有属主的文件；
-nogroup: 查找没有属组的文件；
```



> ```shell
> [root@localhost ~]# ll /tmp/
> total 24
> drwxr-xr-x.  4 root      root       22 Mar 28 23:35 a1
> drwxr-xr-x.  2 root      root        6 Mar 28 23:35 a2
> -rw-r--r--.  1 root      root    13430 Dec  1  2002 functions
> -rw-r--r--.  1 root      root        0 Mar 29 18:38 hello
> -rw-r--r--.  1 root      root        0 Mar 28 21:52 hello.txt
> -rw-r--r--.  1 archlinux mygrp       0 Apr  6 23:12 inittab
> drwx------.  3 moos      moos       74 Mar 30 12:08 moos
> drwxr-xr-x.  2 root      root        6 Mar 30 16:01 mytest
> drwxr-xr-x. 12 root      root     4096 Mar 29 13:33 mytest1
> drwxr-xr-x.  2 root      root        6 Mar 28 23:41 q_y
> drwxr-xr-x.  2 root      root        6 Mar 28 23:41 q_z
> drwxr-xr-x.  2 moosefs   moosefs    54 Apr  6 23:09 skel
> drwxr-xr-x.  2 root      root       76 Apr  5 03:16 test
> -rw-r--r--.  1 root      root     2617 Mar 31 05:31 test.etc
> -rw-r--r--.  1 root      root        0 Mar 29 12:17 tfile-2019-03-29-12-17-21
> drwx------.  2 root      root        6 Mar 29 17:13 vmware-root
> drwxr-xr-x.  2 root      root        6 Mar 28 23:41 x_y
> drwxr-xr-x.  2 root      root        6 Mar 28 23:41 x_z
> [root@localhost ~]# find /tmp/ -user moosefs
> /tmp/skel
> /tmp/skel/a
> /tmp/skel/b
> /tmp/skel/c
> /tmp/skel/d
> /tmp/skel/e
> /tmp/skel/f
> [root@localhost ~]# find /tmp/ -user archlinux
> /tmp/inittab
> [root@localhost ~]# find /tmp/ -group moosefs
> /tmp/skel
> /tmp/skel/a
> /tmp/skel/b
> /tmp/skel/c
> /tmp/skel/d
> /tmp/skel/e
> /tmp/skel/f
> [root@localhost ~]# chown :mygrp /tmp/test
> [root@localhost ~]# ls -ld /tmp/test
> drwxr-xr-x. 2 root mygrp 76 Apr  5 03:16 /tmp/test
> [root@localhost ~]# find /tmp/ -group mygrp
> /tmp/test
> /tmp/inittab
> [root@localhost ~]# 
> [root@localhost ~]# userdel -r moosefs
> [root@localhost ~]# ll /tmp/
> total 24
> drwxr-xr-x.  4 root      root     22 Mar 28 23:35 a1
> drwxr-xr-x.  2 root      root      6 Mar 28 23:35 a2
> -rw-r--r--.  1 root      root  13430 Dec  1  2002 functions
> -rw-r--r--.  1 root      root      0 Mar 29 18:38 hello
> -rw-r--r--.  1 root      root      0 Mar 28 21:52 hello.txt
> -rw-r--r--.  1 archlinux mygrp     0 Apr  6 23:12 inittab
> drwx------.  3 moos      moos     74 Mar 30 12:08 moos
> drwxr-xr-x.  2 root      root      6 Mar 30 16:01 mytest
> drwxr-xr-x. 12 root      root   4096 Mar 29 13:33 mytest1
> drwxr-xr-x.  2 root      root      6 Mar 28 23:41 q_y
> drwxr-xr-x.  2 root      root      6 Mar 28 23:41 q_z
> drwxr-xr-x.  2      5013  5013    54 Apr  6 23:09 skel
> drwxr-xr-x.  2 root      mygrp    76 Apr  5 03:16 test
> -rw-r--r--.  1 root      root   2617 Mar 31 05:31 test.etc
> -rw-r--r--.  1 root      root      0 Mar 29 12:17 tfile-2019-03-29-12-17-21
> drwx------.  2 root      root      6 Mar 29 17:13 vmware-root
> drwxr-xr-x.  2 root      root      6 Mar 28 23:41 x_y
> drwxr-xr-x.  2 root      root      6 Mar 28 23:41 x_z
> [root@localhost ~]# find /tmp/ -uid 5013
> /tmp/skel
> /tmp/skel/a
> /tmp/skel/b
> /tmp/skel/c
> /tmp/skel/d
> /tmp/skel/e
> /tmp/skel/f
> [root@localhost ~]# id archlinux
> uid=5004(archlinux) gid=5004(archlinux) groups=5004(archlinux),1005(mygrp)
> [root@localhost ~]# find /tmp/ -uid 5004
> /tmp/inittab
> [root@localhost ~]# 
> [root@localhost ~]# find /tmp/ -nouser
> /tmp/skel
> /tmp/skel/a
> /tmp/skel/b
> /tmp/skel/c
> /tmp/skel/d
> /tmp/skel/e
> /tmp/skel/f
> [root@localhost ~]# find /tmp/ -nogroup
> /tmp/skel
> /tmp/skel/a
> /tmp/skel/b
> /tmp/skel/c
> /tmp/skel/d
> /tmp/skel/e
> /tmp/skel/f
> [root@localhost ~]# 
> 
> ```
>
> **注：没有属主和属组在系统中是非常危险的，如果新建一个用户，ID号正好是此ID的话，那么此文件就会属于此新建的用户，万一此文件有上一个用户的私人信息的话，这就不好说了；所以需要定期查找系统上哪些文件没有属主和属组的，然后找一个新的属主和属组，这个新的属主和属组一般为root，也因为只有root有权限更改属主和属组。**



#### 根据文件的类型查找：



```
-type TYPE:
	f: 普通文件
	d: 目录文件
	l: 符号链接文件
	b: 块设备文件
	c: 字符设备文件
	p: 管道文件
	s: 套接字文件
```



> ```shell
> [root@localhost ~]# find /dev/ -type b -ls		//此处 -ls 表示的是处理动作，下面会提到
>  16026    0 brw-rw----   1 root     disk     253,   2 Mar 29 09:22 /dev/dm-2
>   9808    0 brw-rw----   1 root     disk     253,   1 Mar 29 09:22 /dev/dm-1
>   9701    0 brw-rw----   1 root     disk     253,   0 Mar 29 09:22 /dev/dm-0
>   9509    0 brw-rw----   1 root     disk       8,   2 Mar 29 09:22 /dev/sda2
>   9508    0 brw-rw----   1 root     disk       8,   1 Mar 29 09:22 /dev/sda1
>   9507    0 brw-rw----   1 root     disk       8,   0 Mar 29 09:22 /dev/sda
>   9500    0 brw-rw----   1 root     cdrom     11,   0 Mar 29 09:22 /dev/sr0
>   9023    0 brw-rw----   1 root     floppy     2,   0 Mar 29 09:22 /dev/fd0
> [root@localhost ~]# find /dev/ -type c -ls
>  18452    0 crw-rw----   1 root     tty        7, 134 Mar 28 21:35 /dev/vcsa6
>  18451    0 crw-rw----   1 root     tty        7,   6 Mar 28 21:35 /dev/vcs6
>  18450    0 crw-rw----   1 root     tty        7, 133 Mar 28 21:35 /dev/vcsa5
>  18449    0 crw-rw----   1 root     tty        7,   5 Mar 28 21:35 /dev/vcs5
>  18445    0 crw-rw----   1 root     tty        7, 132 Mar 28 21:35 /dev/vcsa4
>  18444    0 crw-rw----   1 root     tty        7,   4 Mar 28 21:35 /dev/vcs4
>  18443    0 crw-rw----   1 root     tty        7, 131 Mar 28 21:35 /dev/vcsa3
>  18442    0 crw-rw----   1 root     tty        7,   3 Mar 28 21:35 /dev/vcs3
>  18440    0 crw-rw----   1 root     tty        7, 130 Mar 28 21:35 /dev/vcsa2
>  18438    0 crw-rw----   1 root     tty        7,   2 Mar 28 21:35 /dev/vcs2
>  15965    0 crw-------   1 root     root      10, 232 Mar 29 09:22 /dev/kvm
>  14837    0 crw-------   1 root     root      10,  58 Mar 29 09:22 /dev/vmci
>  14638    0 crw-rw----   1 root     audio    116,   1 Mar 29 09:22 /dev/snd/se
>  ... ...
>  [root@localhost ~]# find /etc/ -type l -ls
> 134320260    0 lrwxrwxrwx   1 root     root           17 Mar 20 18:40 /etc/mtab -> /proc/self/mounts
> 1686232    0 lrwxrwxrwx   1 root     root           55 Mar 20 18:48 /etc/fonts/conf.d/65-0-lohit-nepali.conf -> /usr/share/fontconfig/conf.avail/65-0-lohit-nepali.conf
> 170945    0 lrwxrwxrwx   1 root     root           56 Mar 20 18:41 /etc/fonts/conf.d/59-liberation-sans.conf -> /usr/share/fontconfig/conf.avail/59-liberation-sans.conf
> 1686247    0 lrwxrwxrwx   1 root     root           55 Mar 20 18:48 /etc/fonts/conf.d/66-sil-abyssinica.conf -> /usr/share/fontconfig/conf.avail/66-sil-abyssinica.conf
> 170946    0 lrwxrwxrwx   1 root     root           56 Mar 20 18:41 /etc/fonts/conf.d/59-liberation-mono.conf -> /usr/share/fontconfig/conf.avail/59-liberation-mono.conf
> 201511    0 lrwxrwxrwx   1 root     root           50 Mar 20 18:42 /etc/fonts/conf.d/31-cantarell.conf -> /usr/share/fontconfig/conf.avail/31-cantarell.conf
> 1686258    0 lrwxrwxrwx   1 root     root           66 Mar 20 18:48 /etc/fonts/conf.d/20-unhint-small-dejavu-serif.conf -> /usr/share/fontconfig/conf.avail/20-unhint-small-dejavu-serif.conf
> 252796    0 lrwxrwxrwx   1 root     root           59 Mar 20 18:42 /etc/fonts/conf.d/10-scale-bitmap-fonts.conf -> /usr/share/fontconfig/conf.avail/10-scale-bitmap-fonts.conf
> 1686259    0 lrwxrwxrwx   1 root     root           53 Mar 20 18:48 /etc/fonts/conf.d/57-dejavu-serif.conf -> /usr/share/fontconfig/conf.avail/57-dejavu-serif.conf
> 252797    0 lrwxrwxrwx   1 root     root           58 Mar 20 18:42 /etc/fonts/conf.d/20-unhint-small-vera.conf -> /usr/share/fontconfig/conf.avail/20-unhint-small-vera.conf
> 1686260    0 lrwxrwxrwx   1 root     root           50 Mar 20 18:48 /etc/fonts/conf.d/66-sil-nuosu.conf -> /usr/share/fontconfig/conf.avail/66-sil-nuosu.conf
> 1686261    0 lrwxrwxrwx   1 root     root           57 Mar 20 18:48 /etc/fonts/conf.d/57-paratype-pt-sans.conf -> /usr/share/fontconfig/conf.avail/57-paratype-pt-sans.conf
> 252799    0 lrwxrwxrwx   1 root     root           56 Mar 20 18:42 /etc/fonts/conf.d/25-unhint-nonlatin.conf -> /usr/share/fontconfig/conf.avail/25-unhint-nonlatin.conf
> 1686264    0 lrwxrwxrwx   1 root     root           52 Mar 20 18:48 /etc/fonts/conf.d/65-0-jomolhari.conf -> /usr/share/fontconfig/conf.avail/65-0-jomolhari.conf
> 252800    0 lrwxrwxrwx   1 root     root           55 Mar 20 18:42 /etc/fonts/conf.d/30-metric-aliases.conf -> /usr/share/fontconfig/conf.avail/30-metric-aliases.conf
> 252801    0 lrwxrwxrwx   1 root     root           52 Mar 20 18:42 /etc/fonts/conf.d/30-urw-aliases.conf -> /usr/share/fontconfig/conf.avail/30-urw-aliases.conf
> 252802    0 lrwxrwxrwx   1 root     root           49 Mar 20 18:42 /etc/fonts/conf.d/40-nonlatin.conf -> /usr/share/fontconfig/conf.avail/40-nonlatin.conf
> 252803    0 lrwxrwxrwx   1 root     root           46 Mar 20 18:42 /etc/fonts/conf.d/45-latin.conf -> /usr/share/fontconfig/conf.avail/45-latin.conf
> 252804    0 lrwxrwxrwx   1 root     root           50 Mar 20 18:42 /etc/fonts/conf.d/49-sansserif.conf -> /usr/share/fontconfig/conf.avail/49-sansserif.conf
> 243253    0 lrwxrwxrwx   1 root     root           45 Mar 20 18:42 /etc/fonts/conf.d/50-user.conf -> /usr/share/fontconfig/conf.avail/50-user.conf
> 252805    0 lrwxrwxrwx   1 root     root           46 Mar 20 18:42 /etc/fonts/conf.d/51-local.conf -> /usr/share/fontconfig/conf.avail/51-local.conf
> 252806    0 lrwxrwxrwx   1 root     root           46 Mar 20 18:42 /etc/fonts/conf.d/60-latin.conf -> /usr/share/fontconfig/conf.avail/60-latin.conf
> 1686267    0 lrwxrwxrwx   1 root     root           51 Mar 20 18:48 /etc/fonts/conf.d/65-sil-padauk.conf -> /usr/share/fontconfig/conf.avail/65-sil-padauk.conf
> ... ...
> [root@localhost ~]# 
> 
> ```



#### 组合测试：



```
与：-a,默认组合逻辑；
或：-o
非：-not,!
```



> ```shell
> [root@localhost ~]# find /tmp/ -nouser -type f -ls	//此处表示同时符合两种查找条件
>   6190    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/a
>   6132    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/b
> 2284763    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/c
> 2284780    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/d
> 2284781    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/e
> 2284782    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/f
> [root@localhost ~]# find /tmp/ -nouser -a -type f -ls
>   6190    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/a
>   6132    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/b
> 2284763    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/c
> 2284780    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/d
> 2284781    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/e
> 2284782    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/f
> [root@localhost ~]# find /tmp/ \( -nouser  -o  -type f \) -ls	//此处表示两种查找条件，只要符合其一即可；由于此处是“或”，如果不加"()"，那么 -ls只是针对 -type f做的处理动作；又由于"()"在bash中有特殊意义，所以需要转义  
> 2284788    4 -r--r--r--   1 root     root           11 Mar 28 21:35 /tmp/.X0-lock
>    134    0 -rw-r--r--   1 root     root            0 Mar 28 21:52 /tmp/hello.txt
>   6128    0 -rw-r--r--   1 root     root            0 Mar 29 12:17 /tmp/tfile-2019-03-29-12-17-21
> 69163747    4 -rw-r--r--   1 root     root          232 Mar 29 13:33 /tmp/mytest1/pam.d/config-util
> 69163748    4 -rw-r--r--   1 root     root          154 Mar 29 13:33 /tmp/mytest1/pam.d/other
> 69163749    4 -rw-r--r--   1 root     root          192 Mar 29 13:33 /tmp/mytest1/pam.d/chfn
> 69163750    4 -rw-r--r--   1 root     root          192 Mar 29 13:33 /tmp/mytest1/pam.d/chsh
> 69163751    4 -rw-r--r--   1 root     root          796 Mar 29 13:33 /tmp/mytest1/pam.d/login
> 69163757    4 -rw-r--r--   1 root     root          681 Mar 29 13:33 /tmp/mytest1/pam.d/remote
> 69163758    4 -rw-r--r--   1 root     root          143 Mar 29 13:33 /tmp/mytest1/pam.d/runuser
> 69163759    4 -rw-r--r--   1 root     root          138 Mar 29 13:33 /tmp/mytest1/pam.d/runuser-l
> 69163760    4 -rw-r--r--   1 root     root          540 Mar 29 13:33 /tmp/mytest1/pam.d/su
> 69163761    4 -rw-r--r--   1 root     root          137 Mar 29 13:33 /tmp/mytest1/pam.d/su-l
> 69163762    4 -rw-r--r--   1 root     root          188 Mar 29 13:33 /tmp/mytest1/pam.d/passwd
> 69163763    4 -rw-r--r--   1 root     root           70 Mar 29 13:33 /tmp/mytest1/pam.d/ksu
> 69163764    4 -rw-r--r--   1 root     root          181 Mar 29 13:33 /tmp/mytest1/pam.d/systemd-user
> 69163765    4 -rw-r--r--   1 root     root          155 Mar 29 13:33 /tmp/mytest1/pam.d/polkit-1
> 69163766    4 -rw-r--r--   1 root     root          293 Mar 29 13:33 /tmp/mytest1/pam.d/crond
> 69163767    4 -rw-r--r--   1 root     root          144 Mar 29 13:33 /tmp/mytest1/pam.d/ppp
> 69163768    4 -rw-r--r--   1 root     root          297 Mar 29 13:33 /tmp/mytest1/pam.d/vmtoolsd
> 69163769    4 -r--r--r--   1 root     root          146 Mar 29 13:33 /tmp/mytest1/pam.d/cups
> 69163770    4 -rw-r--r--   1 root     root          134 Mar 29 13:33 /tmp/mytest1/pam.d/kcheckpass
> 69163771    4 -rw-r--r--   1 root     root          134 Mar 29 13:33 /tmp/mytest1/pam.d/kscreensaver
> 69163772    4 -rw-r--r--   1 root     root          163 Mar 29 13:33 /tmp/mytest1/pam.d/xserver
> 69163773    4 -rw-r--r--   1 root     root           84 Mar 29 13:33 /tmp/mytest1/pam.d/vlock
> 69163774    4 -rw-r--r--   1 root     root           97 Mar 29 13:33 /tmp/mytest1/pam.d/liveinst
> 69163775    4 -rw-r--r--   1 root     root          590 Mar 29 13:33 /tmp/mytest1/pam.d/gdm-autologin
> 69163776    4 -rw-r--r--   1 root     root          605 Mar 29 13:33 /tmp/mytest1/pam.d/gdm-fingerprint
> ... ...
> [root@localhost ~]# find /tmp/ -not -type f -ls		//查找不是文件的所有文件
>    133    4 drwxrwxrwt  19 root     root         4096 Apr  7 02:02 /tmp/
> 67956257    0 drwxrwxrwt   2 root     root           15 Mar 28 21:35 /tmp/.X11-unix
> 69163753    0 srwxrwxrwx   1 root     root            0 Mar 28 21:35 /tmp/.X11-unix/X0
> 135079269    0 drwxrwxrwt   2 root     root           17 Mar 28 21:35 /tmp/.ICE-unix
> 137069222    0 srwxrwxrwx   1 gdm      gdm             0 Mar 28 21:35 /tmp/.ICE-unix/1331
> 203129361    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.XIM-unix
> 469207    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.font-unix
> 67956258    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.Test-unix
>   6114    0 drwxr-xr-x   4 root     root           22 Mar 28 23:35 /tmp/a1
> 69163744    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a1/a
> 137383556    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a1/b
> 206638145    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a2
>   6116    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/x_y
> 69163745    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/x_z
> 137383557    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/q_y
> 206638146    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/q_z
>   6113    4 drwxr-xr-x  12 root     root         4096 Mar 29 13:33 /tmp/mytest1
> 69163746    4 drwxr-xr-x   2 root     root         4096 Mar 29 13:33 /tmp/mytest1/pam.d
> 69163782    0 lrwxrwxrwx   1 root     root           25 Mar 29 13:33 /tmp/mytest1/pam.d/smtp -> /etc/alternatives/mta-pam
> 69163789    0 lrwxrwxrwx   1 root     root           14 Mar 29 13:33 /tmp/mytest1/pam.d/system-auth -> system-auth-ac
> 69163791    0 lrwxrwxrwx   1 root     root           12 Mar 29 13:33 /tmp/mytest1/pam.d/postlogin -> postlogin-ac
> 69163793    0 lrwxrwxrwx   1 root     root           16 Mar 29 13:33 /tmp/mytest1/pam.d/password-auth -> password-auth-ac
> 69163795    0 lrwxrwxrwx   1 root     root           19 Mar 29 13:33 /tmp/mytest1/pam.d/fingerprint-auth -> fingerprint-auth-ac
> 69163797    0 lrwxrwxrwx   1 root     root           17 Mar 29 13:33 /tmp/mytest1/pam.d/smartcard-auth -> smartcard-auth-ac
> 137383555    4 drwxr-xr-x  11 root     root         4096 Mar 29 13:33 /tmp/mytest1/pki
> 206638144    0 drwxr-xr-x   2 root     root          101 Mar 29 13:33 /tmp/mytest1/pki/rpm-gpg
> 2284738    0 drwxr-xr-x   4 root     root           48 Mar 29 13:33 /tmp/mytest1/pki/ca-trust
> 69163798    0 drwxr-xr-x   5 root     root           54 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/extracted
> 137383559    0 drwxr-xr-x   2 root     root           33 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/extracted/java
> 206638152    0 drwxr-xr-x   2 root     root           45 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/extracted/openssl
> 2284740    0 drwxr-xr-x   2 root     root           97 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/extracted/pem
> 69163800    0 drwxr-xr-x   4 root     root           49 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/source
> 137383562    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/source/anchors
> 206638155    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/ca-trust/source/blacklist
> 2284745    0 drwxr-xr-x   2 root     root           20 Mar 29 13:33 /tmp/mytest1/pki/java
> 2284746    0 lrwxrwxrwx   1 root     root           40 Mar 29 13:33 /tmp/mytest1/pki/java/cacerts -> /etc/pki/ca-trust/extracted/java/cacerts
> 69163802    0 drwxr-xr-x   5 root     root           76 Mar 29 13:33 /tmp/mytest1/pki/tls
> 69163803    0 lrwxrwxrwx   1 root     root           49 Mar 29 13:33 /tmp/mytest1/pki/tls/cert.pem -> /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
> 137383567    4 drwxr-xr-x   2 root     root         4096 Mar 29 13:33 /tmp/mytest1/pki/tls/certs
> 137383568    0 lrwxrwxrwx   1 root     root           49 Mar 29 13:33 /tmp/mytest1/pki/tls/certs/ca-bundle.crt -> /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
> 137383569    0 lrwxrwxrwx   1 root     root           55 Mar 29 13:33 /tmp/mytest1/pki/tls/certs/ca-bundle.trust.crt -> /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt
> 206638156    0 drwxr-xr-x   2 root     root           69 Mar 29 13:33 /tmp/mytest1/pki/tls/misc
> 2284747    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/tls/private
> 69163805    0 drwxr-xr-x   2 root     root           97 Mar 29 13:33 /tmp/mytest1/pki/nssdb
> 137383573    0 drwxr-xr-x   6 root     root           57 Mar 29 13:33 /tmp/mytest1/pki/CA
> 206638169    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/CA/certs
> 2284748    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/CA/crl
> 67109000    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/CA/newcerts
> 137383574    0 drwx------   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/CA/private
> 206638170    0 drwx------   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/rsyslog
> 2284749    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/product
> 68403883    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pki/product-default
> 137383575    0 drwxr-xr-x   2 root     root           27 Mar 29 13:33 /tmp/mytest1/plymouth
> 206638171    0 drwxr-xr-x   5 root     root           49 Mar 29 13:33 /tmp/mytest1/pm
> 2284750    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pm/config.d
> 68403884    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pm/power.d
> 137383577    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/pm/sleep.d
> 206638172    0 drwxr-xr-x   2 root     root            6 Mar 29 13:33 /tmp/mytest1/popt.d
>   6137    4 drwxr-xr-x   2 root     root         4096 Mar 29 13:33 /tmp/mytest1/postfix
> 68403885    4 drwxr-xr-x   3 root     root         4096 Mar 29 13:33 /tmp/mytest1/ppp
> 137383578    0 drwxr-xr-x   2 root     root           19 Mar 29 13:33 /tmp/mytest1/ppp/peers
> 206638173    0 drwxr-xr-x   2 root     root           75 Mar 29 13:33 /tmp/mytest1/prelink.conf.d
>   6199    4 drwxr-xr-x   2 root     root         4096 Mar 29 13:33 /tmp/mytest1/profile.d
> 68493472    0 drwxr-xr-x   2 root     root           75 Mar 29 13:33 /tmp/mytest1/pulse
> 137383552    0 drwx------   2 root     root            6 Mar 29 17:13 /tmp/vmware-root
> 206638177    0 drwx------   3 moos     moos           74 Mar 30 12:08 /tmp/moos
> 2284737    0 drwxr-xr-x   4 moos     moos           37 Mar 20 18:40 /tmp/moos/.mozilla
> 68493478    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/extensions
> 137383554    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/plugins
> 206638179    0 drwxr-xr-x   2 root     root            6 Mar 30 16:01 /tmp/mytest
> 68493481    0 drwxr-xr-x   2 root     mygrp          76 Apr  5 03:16 /tmp/test
>   6187    0 drwxr-xr-x   2 5013     5013           54 Apr  6 23:09 /tmp/skel
> [root@localhost ~]# 
> 
> ```



```
练习：
	1、找出/tmp目录下属主为非root的所有文件；
	
[root@localhost ~]# find /tmp/ -not -user root -ls
137069222    0 srwxrwxrwx   1 gdm      gdm             0 Mar 28 21:35 /tmp/.ICE-unix/1331
206638177    0 drwx------   3 moos     moos           74 Mar 30 12:08 /tmp/moos
2284737    0 drwxr-xr-x   4 moos     moos           37 Mar 20 18:40 /tmp/moos/.mozilla
68493478    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/extensions
137383554    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/plugins
206638180    4 -rw-r--r--   1 moos     moos           18 Mar  5  2015 /tmp/moos/.bash_logout
206638181    4 -rw-r--r--   1 moos     moos          193 Mar  5  2015 /tmp/moos/.bash_profile
206638182    4 -rw-r--r--   1 moos     moos          231 Mar  5  2015 /tmp/moos/.bashrc
  6187    0 drwxr-xr-x   2 5013     5013           54 Apr  6 23:09 /tmp/skel
  6190    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/a
  6132    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/b
2284763    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/c
2284780    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/d
2284781    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/e
2284782    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/f
2284783    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 23:12 /tmp/inittab

	2、找出/tmp目录下文件名中不包含fstab字符串的文件；
	
[root@localhost ~]# find /tmp/ -not -iname "*fstab*" -ls
   133    4 drwxrwxrwt  19 root     root         4096 Apr  7 02:10 /tmp/
67956257    0 drwxrwxrwt   2 root     root           15 Mar 28 21:35 /tmp/.X11-unix
69163753    0 srwxrwxrwx   1 root     root            0 Mar 28 21:35 /tmp/.X11-unix/X0
135079269    0 drwxrwxrwt   2 root     root           17 Mar 28 21:35 /tmp/.ICE-unix
137069222    0 srwxrwxrwx   1 gdm      gdm             0 Mar 28 21:35 /tmp/.ICE-unix/1331
203129361    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.XIM-unix
469207    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.font-unix
67956258    0 drwxrwxrwt   2 root     root            6 Mar 20 18:43 /tmp/.Test-unix
2284788    4 -r--r--r--   1 root     root           11 Mar 28 21:35 /tmp/.X0-lock
   134    0 -rw-r--r--   1 root     root            0 Mar 28 21:52 /tmp/hello.txt
  6114    0 drwxr-xr-x   4 root     root           22 Mar 28 23:35 /tmp/a1
69163744    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a1/a
137383556    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a1/b
206638145    0 drwxr-xr-x   2 root     root            6 Mar 28 23:35 /tmp/a2
  6116    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/x_y
69163745    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/x_z
137383557    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/q_y
206638146    0 drwxr-xr-x   2 root     root            6 Mar 28 23:41 /tmp/q_z
  6128    0 -rw-r--r--   1 root     root            0 Mar 29 12:17 /tmp/tfile-2019-03-29-12-17-21
  6113    4 drwxr-xr-x  12 root     root         4096 Mar 29 13:33 /tmp/mytest1
69163746    4 drwxr-xr-x   2 root     root         4096 Mar 29 13:33 /tmp/mytest1/pam.d
69163747    4 -rw-r--r--   1 root     root          232 Mar 29 13:33 /tmp/mytest1/pam.d/config-util
69163748    4 -rw-r--r--   1 root     root          154 Mar 29 13:33 /tmp/mytest1/pam.d/other
69163749    4 -rw-r--r--   1 root     root          192 Mar 29 13:33 /tmp/mytest1/pam.d/chfn
69163750    4 -rw-r--r--   1 root     root          192 Mar 29 13:33 /tmp/mytest1/pam.d/chsh
69163751    4 -rw-r--r--   1 root     root          796 Mar 29 13:33 /tmp/mytest1/pam.d/login
69163757    4 -rw-r--r--   1 root     root          681 Mar 29 13:33 /tmp/mytest1/pam.d/remote
69163758    4 -rw-r--r--   1 root     root          143 Mar 29 13:33 /tmp/mytest1/pam.d/runuser
69163759    4 -rw-r--r--   1 root     root          138 Mar 29 13:33 /tmp/mytest1/pam.d/runuser-l
... ...

	3、找出/tmp目录下属主为非root，而且文件名不包含fstab字符串的文件；
	
[root@localhost ~]# find /tmp/ -not -user root -a -not -iname "*fstab*" -ls
137069222    0 srwxrwxrwx   1 gdm      gdm             0 Mar 28 21:35 /tmp/.ICE-unix/1331
206638177    0 drwx------   3 moos     moos           74 Mar 30 12:08 /tmp/moos
2284737    0 drwxr-xr-x   4 moos     moos           37 Mar 20 18:40 /tmp/moos/.mozilla
68493478    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/extensions
137383554    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/plugins
206638180    4 -rw-r--r--   1 moos     moos           18 Mar  5  2015 /tmp/moos/.bash_logout
206638181    4 -rw-r--r--   1 moos     moos          193 Mar  5  2015 /tmp/moos/.bash_profile
206638182    4 -rw-r--r--   1 moos     moos          231 Mar  5  2015 /tmp/moos/.bashrc
  6187    0 drwxr-xr-x   2 5013     5013           54 Apr  6 23:09 /tmp/skel
  6190    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/a
  6132    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/b
2284763    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/c
2284780    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/d
2284781    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/e
2284782    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/f
2284783    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 23:12 /tmp/inittab
[root@localhost ~]# find /tmp/ -not \( -user root -o -iname "*fstab*" \) -ls
137069222    0 srwxrwxrwx   1 gdm      gdm             0 Mar 28 21:35 /tmp/.ICE-unix/1331
206638177    0 drwx------   3 moos     moos           74 Mar 30 12:08 /tmp/moos
2284737    0 drwxr-xr-x   4 moos     moos           37 Mar 20 18:40 /tmp/moos/.mozilla
68493478    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/extensions
137383554    0 drwxr-xr-x   2 moos     moos            6 Jun  9  2014 /tmp/moos/.mozilla/plugins
206638180    4 -rw-r--r--   1 moos     moos           18 Mar  5  2015 /tmp/moos/.bash_logout
206638181    4 -rw-r--r--   1 moos     moos          193 Mar  5  2015 /tmp/moos/.bash_profile
206638182    4 -rw-r--r--   1 moos     moos          231 Mar  5  2015 /tmp/moos/.bashrc
  6187    0 drwxr-xr-x   2 5013     5013           54 Apr  6 23:09 /tmp/skel
  6190    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/a
  6132    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/b
2284763    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/c
2284780    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/d
2284781    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/e
2284782    0 -rw-r--r--   1 5013     5013            0 Apr  6 23:09 /tmp/skel/f
2284783    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 23:12 /tmp/inittab
	
```



#### 根据文件的大小查找：



```
-size [+|-]#UNIT
	常用单位：k,M,G	

	#UNIT: (#-1,#]		(精确某个值)
	-#UNIT: [0,#-1] 	(小于某个值) 
	+#UNIT: (#,oo)		(大于某个值)
```



> ```shell
> [root@localhost ~]# ls -l /tmp/
> total 308
> -rw-------. 1 root root 116387 Apr  7 02:29 messages
> -rw-------. 1 root root 116040 Apr  7 02:34 messages.2
> [root@localhost ~]# ls -lh /tmp/
> total 308K
> -rw-------. 1 root root 114K Apr  7 02:29 messages
> -rw-------. 1 root root 114K Apr  7 02:34 messages.2
> [root@localhost ~]# find /tmp/ -size 114k
> /tmp/messages
> /tmp/messages.2
> [root@localhost ~]#
> [root@localhost ~]# ls -lh /tmp/
> total 308K
> -rw-------. 1 root root 114K Apr  7 02:29 messages
> -rw-------. 1 root root 115K Apr  7 02:45 messages.2
> [root@localhost ~]# find /tmp/ -size 114k
> /tmp/messages
> [root@localhost ~]# find /tmp/ -size 115k
> /tmp/messages.2
> [root@localhost ~]# find /tmp/ -size -115k
> /tmp/
> /tmp/.X11-unix
> /tmp/.X11-unix/X0
> /tmp/.ICE-unix
> /tmp/.ICE-unix/1331
> /tmp/.XIM-unix
> /tmp/.font-unix
> /tmp/.Test-unix
> /tmp/.X0-lock
> /tmp/messages			//此时114k大小的文件就符合条件了
> [root@localhost ~]#
> [root@localhost ~]# find /tmp/ -size +114k
> /tmp/messages.2
> [root@localhost ~]# 
> 
> ```



#### 根据时间戳查找：



```
以"天"为单位：
	-atime [+|-]#
		#: [#,#-1)
		-#: (#,0]
		+#: (oo,#-1]
	-mtime
	-ctime

以"分钟"为单位：
	-amin
	-mmin
	-cmin
```



> ```shell
> [root@localhost ~]# find /etc/ -atime +7 -ls		//至少7天没有访问过的文件
> ... ...
> 136999784    4 -rw-r--r--   1 root     root         2872 Jun 10  2014 /etc/pinforc
> 137160561    4 -rw-r-----   1 root     root         3181 Mar  5  2015 /etc/sudo-ldap.conf
> 137160562    4 -rw-r-----   1 root     root         1786 Mar  5  2015 /etc/sudo.conf
> 137160563    4 -r--r-----   1 root     root         4000 Mar  5  2015 /etc/sudoers
> 136999782    8 -rw-r--r--   1 root     root         4760 Jun  9  2014 /etc/enscript.cfg
> 137116684   12 -rw-r--r--   1 root     root         8892 Jun 10  2014 /etc/nanorc
> 137116791    4 -rw-r--r--   1 root     root         1362 Jun  9  2014 /etc/pbm2ppa.conf
> 137116792    8 -rw-r--r--   1 root     root         6300 Jun  9  2014 /etc/pnm2ppa.conf
> 137073192    4 -rw-r--r--   1 root     root           37 Mar 20 18:51 /etc/vconsole.conf
> 137073196    4 -rw-r--r--   1 root     root           22 Mar 20 18:51 /etc/hostname
> 137073201   12 -rw-r--r--   1 root     root        12288 Mar 20 10:54 /etc/aliases.db
> [root@localhost ~]# stat /etc/sudoers
>   File: ‘/etc/sudoers’
>   Size: 4000      	Blocks: 8          IO Block: 4096   regular file
> Device: fd00h/64768d	Inode: 137160563   Links: 1
> Access: (0440/-r--r-----)  Uid: (    0/    root)   Gid: (    0/    root)
> Context: system_u:object_r:etc_t:s0
> Access: 2015-03-05 21:42:03.000000000 -0500
> Modify: 2015-03-05 21:42:03.000000000 -0500
> Change: 2019-03-20 18:47:19.676998704 -0400
>  Birth: -
> [root@localhost ~]# 
> [root@localhost ~]# cat /etc/sudoers
> ... ...
> [root@localhost ~]# stat /etc/sudoers
>   File: ‘/etc/sudoers’
>   Size: 4000      	Blocks: 8          IO Block: 4096   regular file
> Device: fd00h/64768d	Inode: 137160563   Links: 1
> Access: (0440/-r--r-----)  Uid: (    0/    root)   Gid: (    0/    root)
> Context: system_u:object_r:etc_t:s0
> Access: 2019-04-07 03:23:03.730697254 -0400
> Modify: 2015-03-05 21:42:03.000000000 -0500
> Change: 2019-03-20 18:47:19.676998704 -0400
>  Birth: -
> [root@localhost ~]# find /etc/ -atime +7 -ls | fgrep "sudoers"
> [root@localhost ~]# 
> [root@localhost ~]#
> [root@localhost ~]# find /etc/ -mtime -1 -ls			//24小时内修改过的文件
> 134320257   12 drwxr-xr-x 133 root     root         8192 Apr  7 00:52 /etc/
> 134320261    4 -rw-r--r--   1 root     root           62 Apr  6 18:19 /etc/resolv.conf
> 137383607    4 -rw-r--r--   1 root     root          982 Apr  7 00:52 /etc/group
> 137383609    4 ----------   1 root     root          871 Apr  7 00:52 /etc/gshadow
> 137383592    4 -rw-r--r--   1 root     root         2259 Apr  7 00:52 /etc/passwd
> 134957599    4 -rw-r--r--   1 root     root         2304 Apr  6 23:07 /etc/passwd-
> 134694010    4 ----------   1 root     root         1406 Apr  6 23:07 /etc/shadow-
> 137383593    4 ----------   1 root     root         1376 Apr  7 00:52 /etc/shadow
> 134694007    4 -rw-r--r--   1 root     root          998 Apr  6 23:07 /etc/group-
> 134694005    4 ----------   1 root     root          883 Apr  6 23:07 /etc/gshadow-
> 206638207    0 drwxr-xr-x   2 root     root           80 Apr  6 22:45 /etc/test
> 206554789    0 -rw-r--r--   1 root     root            0 Apr  6 22:38 /etc/test/Passwd
> 206554792    0 -rw-r--r--   1 root     root            0 Apr  6 22:38 /etc/test/MPASSWD.txt
> 206554804    0 -rw-r--r--   1 root     root            0 Apr  6 22:42 /etc/test/npasswd
> 206554807    0 -rw-r--r--   1 root     root            0 Apr  6 22:42 /etc/test/npasswdo
> 206546784    0 -rw-r--r--   1 root     root            0 Apr  6 22:45 /etc/test/passwdx
> [root@localhost ~]# 
> 
> ```



#### 根据权限查找：



```
-perm [/|-] mode
	mode: 精确权限匹配；
	/mode: 任何一类用户(u,g,o)的权限中的任何一位(r,w,x)符合条件即满足；
		9位权限之间存在"或"关系；
	-mode: 每一类用户(u,g,o)的权限中的每一位(r,w,x)同时符合条件即满足；
		9位权限之间存在"与"关系；
```



> ```shell
> [root@localhost ~]# cd /tmp/
> [root@localhost tmp]# ls
> messages  messages.2
> [root@localhost tmp]# mkdir test
> [root@localhost tmp]# cd test/
> [root@localhost test]# ls
> [root@localhost test]# touch a b c d e f g
> [root@localhost test]# ll
> total 0
> -rw-r--r--. 1 root root 0 Apr  7 03:39 a
> -rw-r--r--. 1 root root 0 Apr  7 03:39 b
> -rw-r--r--. 1 root root 0 Apr  7 03:39 c
> -rw-r--r--. 1 root root 0 Apr  7 03:39 d
> -rw-r--r--. 1 root root 0 Apr  7 03:39 e
> -rw-r--r--. 1 root root 0 Apr  7 03:39 f
> -rw-r--r--. 1 root root 0 Apr  7 03:39 g
> [root@localhost test]# chmod 640 a
> [root@localhost test]# chmod 666 b
> [root@localhost test]# chmod 440 c
> [root@localhost test]# chmod 775 d
> [root@localhost test]# chmod 777 e
> [root@localhost test]# ll
> total 0
> -rw-r-----. 1 root root 0 Apr  7 03:39 a
> -rw-rw-rw-. 1 root root 0 Apr  7 03:39 b
> -r--r-----. 1 root root 0 Apr  7 03:39 c
> -rwxrwxr-x. 1 root root 0 Apr  7 03:39 d
> -rwxrwxrwx. 1 root root 0 Apr  7 03:39 e
> -rw-r--r--. 1 root root 0 Apr  7 03:39 f
> -rw-r--r--. 1 root root 0 Apr  7 03:39 g
> [root@localhost test]# find ./ -perm 644 -ls
> 68493481    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./f
> 68493482    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./g
> [root@localhost test]# 
> [root@localhost test]# find ./ -perm /666 
> ./
> ./a
> ./b
> ./c
> ./d
> ./e
> ./f
> ./g
> [root@localhost test]# find ./ -perm /666 -ls
> 68493472    0 drwxr-xr-x   2 root     root           62 Apr  7 03:39 ./
> 68493473    0 -rw-r-----   1 root     root            0 Apr  7 03:39 ./a
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493475    0 -r--r-----   1 root     root            0 Apr  7 03:39 ./c
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> 68493481    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./f
> 68493482    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./g
> [root@localhost test]# 
> [root@localhost test]# find ./ -perm /222 -ls			//至少有一类用户有写权限的文件
> 68493472    0 drwxr-xr-x   2 root     root           62 Apr  7 03:39 ./
> 68493473    0 -rw-r-----   1 root     root            0 Apr  7 03:39 ./a
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> 68493481    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./f
> 68493482    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./g
> [root@localhost test]# find ./ -perm /111 -ls			//至少有一类用户有执行权限的文件
> 68493472    0 drwxr-xr-x   2 root     root           62 Apr  7 03:39 ./
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -perm /001 -ls			//其它用户有执行权限的文件
> 68493472    0 drwxr-xr-x   2 root     root           62 Apr  7 03:39 ./
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -perm /002 -ls			//其它用户有写权限的文件(这种文件非常危险，可通过此方法来查找)
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# 
> [root@localhost test]# find ./ -perm -222 -ls			//三类用户都要有写权限的文件
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -not -perm -222 -ls			//至少有一类用户没有写权限的文件
> 68493472    0 drwxr-xr-x   2 root     root           62 Apr  7 03:39 ./
> 68493473    0 -rw-r-----   1 root     root            0 Apr  7 03:39 ./a
> 68493475    0 -r--r-----   1 root     root            0 Apr  7 03:39 ./c
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493481    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./f
> 68493482    0 -rw-r--r--   1 root     root            0 Apr  7 03:39 ./g
> [root@localhost test]# 
> [root@localhost test]# find ./ -perm /002 -ls
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -perm -002 -ls		//此也表示查找其它用户有写权限的文件
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -perm /022 -ls		//属组和其它用户至少有一个有写权限的文件
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493476    0 -rwxrwxr-x   1 root     root            0 Apr  7 03:39 ./d
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -perm -022 -ls		//属组和其它用户都要有写权限的文件
> 68493474    0 -rw-rw-rw-   1 root     root            0 Apr  7 03:39 ./b
> 68493478    0 -rwxrwxrwx   1 root     root            0 Apr  7 03:39 ./e
> [root@localhost test]# 
> 
> ```



- ### 处理动作：



```
-print: 输出至标准输出；默认的动作；
-ls: 类似于对查找到的文件执行"ls -l"命令，输出文件的详细信息；
-delete: 删除查找到的文件；（危险动作，勿尝试）
-fls /PATH/TO/SOMEFILE: 把查找到的所有文件的长格式信息保存至指定文件中；
-ok COMMAND {} \;   : 对查找到的每个文件执行由COMMAND表示的命令；每次操作都由用户进行确认；

-exec COMMAND {} \;   : 对查找到的每个文件执行由COMMAND表示的命令；
```



> ```shell
> [root@localhost test]# chown centos:centos c e
> [root@localhost test]# ll
> total 0
> -rw-r-----. 1 root   root   0 Apr  7 03:39 a
> -rw-rw-rw-. 1 root   root   0 Apr  7 03:39 b
> -r--r-----. 1 centos centos 0 Apr  7 03:39 c
> -rwxrwxr-x. 1 root   root   0 Apr  7 03:39 d
> -rwxrwxrwx. 1 centos centos 0 Apr  7 03:39 e
> -rw-r--r--. 1 root   root   0 Apr  7 03:39 f
> -rw-r--r--. 1 root   root   0 Apr  7 03:39 g
> [root@localhost test]# userdel -r centos
> [root@localhost test]# ll
> total 0
> -rw-r-----. 1 root root 0 Apr  7 03:39 a
> -rw-rw-rw-. 1 root root 0 Apr  7 03:39 b
> -r--r-----. 1 5013 5013 0 Apr  7 03:39 c
> -rwxrwxr-x. 1 root root 0 Apr  7 03:39 d
> -rwxrwxrwx. 1 5013 5013 0 Apr  7 03:39 e
> -rw-r--r--. 1 root root 0 Apr  7 03:39 f
> -rw-r--r--. 1 root root 0 Apr  7 03:39 g 
> [root@localhost test]# find ./ -nouser
> ./c
> ./e
> [root@localhost test]# find ./ -nouser -a -nogroup -ls
> 68493475    0 -r--r-----   1 5013     5013            0 Apr  7 03:39 ./c
> 68493478    0 -rwxrwxrwx   1 5013     5013            0 Apr  7 03:39 ./e
> [root@localhost test]# find ./ -nouser -a -nogroup -ok chown root:root {} \;
> < chown ... ./c > ? y
> < chown ... ./e > ? y
> [root@localhost test]# ll
> total 0
> -rw-r-----. 1 root root 0 Apr  7 03:39 a
> -rw-rw-rw-. 1 root root 0 Apr  7 03:39 b
> -r--r-----. 1 root root 0 Apr  7 03:39 c
> -rwxrwxr-x. 1 root root 0 Apr  7 03:39 d
> -rwxrwxrwx. 1 root root 0 Apr  7 03:39 e
> -rw-r--r--. 1 root root 0 Apr  7 03:39 f
> -rw-r--r--. 1 root root 0 Apr  7 03:39 g
> [root@localhost test]# 
> [root@localhost test]# find ./ -perm /002
> ./b
> ./e
> [root@localhost test]# find ./ -perm /002 -exec mv {} {}.danger \;
> [root@localhost test]# ll
> total 0
> -rw-r-----. 1 root root 0 Apr  7 03:39 a
> -rw-rw-rw-. 1 root root 0 Apr  7 03:39 b.danger
> -r--r-----. 1 root root 0 Apr  7 03:39 c
> -rwxrwxr-x. 1 root root 0 Apr  7 03:39 d
> -rwxrwxrwx. 1 root root 0 Apr  7 03:39 e.danger
> -rw-r--r--. 1 root root 0 Apr  7 03:39 f
> -rw-r--r--. 1 root root 0 Apr  7 03:39 g
> [root@localhost test]# 
> 
> ```
>
> **注：find传递查找到的文件路径至后面的命令时，是先查找出所有符合条件的文件路径，并一次性传递给后面的命令；但有些命令不能接受过长的参数，此时命令执行会失败；**
>
> **另一种方式可规避此问题：**
>
> ​	`find ... | xargs COMMAND`



```
练习：

1、查找/var目录下属主为root，且属组为mail的所有文件或目录；

[root@localhost ~]# find /var/ -user root -a -group mail -ls
134323306    4 drwxrwxr-x   2 root     mail         4096 Apr  7 05:20 /var/spool/mail
[root@localhost ~]#

2、查找/usr目录下不属于root,bin或hadoop的所有文件或目录；用两种方法；

[root@localhost ~]# find /usr/ -not -user root -a -not -user bin -a -not -user hadoop -ls
135079288    0 drwx------   2 polkitd  root           32 Mar 20 18:44 /usr/share/polkit-1/rules.d
203430738   12 -rwsr-sr-x   1 abrt     abrt        11232 Mar 23  2015 /usr/libexec/abrt-action-install-debuginfo-to-abrt-cache
[root@localhost ~]# 
[root@localhost ~]# find /usr/ -not \( -user root -o -user bin -o -user hadoop \) -ls
135079288    0 drwx------   2 polkitd  root           32 Mar 20 18:44 /usr/share/polkit-1/rules.d
203430738   12 -rwsr-sr-x   1 abrt     abrt        11232 Mar 23  2015 /usr/libexec/abrt-action-install-debuginfo-to-abrt-cache
[root@localhost ~]# 

3、查找/etc目录下最近一周内其内容修改过，且属主不是root用户也不是hadoop用户的文件或目录；

[root@localhost ~]# id fedora
id: fedora: no such user
[root@localhost ~]# useradd fedora
[root@localhost ~]# chown -R fedora:fedora /etc/test/Passwd 
[root@localhost ~]# chown -R archlinux:mygrp /etc/test/passwdx 
[root@localhost ~]# find /etc/ -mtime -7 -a -not -user root -a -not -user hadoop -ls
206554789    0 -rw-r--r--   1 fedora   fedora          0 Apr  6 22:38 /etc/test/Passwd
206546784    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 22:45 /etc/test/passwdx
[root@localhost ~]# find /etc/ -mtime -7 -a -not \( -user root -o -user hadoop \) -ls
206554789    0 -rw-r--r--   1 fedora   fedora          0 Apr  6 22:38 /etc/test/Passwd
206546784    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 22:45 /etc/test/passwdx
[root@localhost ~]# 

4、查找当前系统上没有属主或属组，且最近一周内曾被访问过的文件或目录；

[root@localhost ~]# userdel -r fedora
[root@localhost ~]# find / \( -nouser -o -nogroup \) -a -mtime -7 -ls
find: ‘/proc/20420/task/20420/fd/6’: No such file or directory
find: ‘/proc/20420/task/20420/fdinfo/6’: No such file or directory
find: ‘/proc/20420/fd/6’: No such file or directory
find: ‘/proc/20420/fdinfo/6’: No such file or directory
206554789    0 -rw-r--r--   1 5013     5013            0 Apr  6 22:38 /etc/test/Passwd
[root@localhost ~]# find /etc  \( -nouser -o -nogroup \) -a -mtime -7 -ls
206554789    0 -rw-r--r--   1 5013     5013            0 Apr  6 22:38 /etc/test/Passwd
[root@localhost ~]# 

5、查找/etc目录下大于1M且类型为普通文件的所有文件；

[root@localhost ~]# find /etc/ -size +1M -a -type f -ls
67981814 6200 -r--r--r--   1 root     root      6345977 Mar 20 18:43 /etc/udev/hwdb.bin
206008148 3752 -rw-r--r--   1 root     root      3839718 Mar  6  2015 /etc/selinux/targeted/policy/policy.29
[root@localhost ~]# find /etc/ -size +1M -a -type f -exec ls -lh {} \;
-r--r--r--. 1 root root 6.1M Mar 20 18:43 /etc/udev/hwdb.bin
-rw-r--r--. 1 root root 3.7M Mar  6  2015 /etc/selinux/targeted/policy/policy.29
[root@localhost ~]# 

6、查找/etc目录下所有用户都没有写权限的文件；

[root@localhost ~]# find /etc/ -not -perm /222 -type f -ls
134448878  176 -r--r--r--   1 root     root       179212 Mar 20 18:41 /etc/pki/ca-trust/extracted/java/cacerts
202012284  316 -r--r--r--   1 root     root       321332 Mar 20 18:41 /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt
 90264  236 -r--r--r--   1 root     root       240762 Mar 20 18:41 /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
 90265  188 -r--r--r--   1 root     root       191741 Mar 20 18:41 /etc/pki/ca-trust/extracted/pem/email-ca-bundle.pem
 90266  188 -r--r--r--   1 root     root       191772 Mar 20 18:41 /etc/pki/ca-trust/extracted/pem/objsign-ca-bundle.pem
68145468    4 -r--r--r--   1 root     root         2231 Mar  5  2015 /etc/lvm/profile/command_profile_template.profile
68145469    4 -r--r--r--   1 root     root          827 Mar  5  2015 /etc/lvm/profile/metadata_profile_template.profile
68145470    4 -r--r--r--   1 root     root           76 Jan 21  2015 /etc/lvm/profile/thin-generic.profile
68145471    4 -r--r--r--   1 root     root           80 Jan 21  2015 /etc/lvm/profile/thin-performance.profile
137383556    4 ----------   1 root     root          871 Apr  7 06:02 /etc/gshadow
134694010    4 ----------   1 root     root         1405 Apr  7 05:52 /etc/shadow-
137383554    4 ----------   1 root     root         1376 Apr  7 06:02 /etc/shadow
135786162    4 -r--r--r--   1 root     root          460 Mar  5  2015 /etc/dbus-1/system.d/cups.conf
135140761    4 -r--r--r--   1 root     root           63 Mar  6  2015 /etc/ld.so.conf.d/kernel-3.10.0-229.el7.x86_64.conf
67981814 6200 -r--r--r--   1 root     root      6345977 Mar 20 18:43 /etc/udev/hwdb.bin
135079267    4 -r--r--r--   1 root     root           33 Mar 20 18:43 /etc/machine-id
204093298    4 -r--r--r--   1 root     root          146 Mar  5  2015 /etc/pam.d/cups
134694005    4 ----------   1 root     root          882 Apr  7 05:52 /etc/gshadow-
252789    4 -r--------   1 root     root           45 Mar 20 18:42 /etc/openldap/certs/password
137160563    4 -r--r-----   1 root     root         4000 Mar  5  2015 /etc/sudoers
[root@localhost ~]# 

7、查找/etc目录至少有一类用户没有执行权限的文件；

[root@localhost ~]# find /etc/ -not -perm -111 -type f -ls
... ...
136999784    4 -rw-r--r--   1 root     root         2872 Jun 10  2014 /etc/pinforc
137160561    4 -rw-r-----   1 root     root         3181 Mar  5  2015 /etc/sudo-ldap.conf
137160562    4 -rw-r-----   1 root     root         1786 Mar  5  2015 /etc/sudo.conf
137160563    4 -r--r-----   1 root     root         4000 Mar  5  2015 /etc/sudoers
137175685    8 -rw-r--r--   1 root     root         5171 Jun  9  2014 /etc/man_db.conf
136999782    8 -rw-r--r--   1 root     root         4760 Jun  9  2014 /etc/enscript.cfg
137116684   12 -rw-r--r--   1 root     root         8892 Jun 10  2014 /etc/nanorc
137116791    4 -rw-r--r--   1 root     root         1362 Jun  9  2014 /etc/pbm2ppa.conf
137116792    8 -rw-r--r--   1 root     root         6300 Jun  9  2014 /etc/pnm2ppa.conf
137073192    4 -rw-r--r--   1 root     root           37 Mar 20 18:51 /etc/vconsole.conf
137073194    4 -rw-r--r--   1 root     root           19 Mar 20 18:51 /etc/locale.conf
137073196    4 -rw-r--r--   1 root     root           22 Mar 20 18:51 /etc/hostname
137073201   12 -rw-r--r--   1 root     root        12288 Mar 20 10:54 /etc/aliases.db
206554789    0 -rw-r--r--   1 5013     5013            0 Apr  6 22:38 /etc/test/Passwd
206554792    0 -rw-r--r--   1 root     root            0 Apr  6 22:38 /etc/test/MPASSWD.txt
206554804    0 -rw-r--r--   1 root     root            0 Apr  6 22:42 /etc/test/npasswd
206554807    0 -rw-r--r--   1 root     root            0 Apr  6 22:42 /etc/test/npasswdo
206546784    0 -rw-r--r--   1 archlinux mygrp           0 Apr  6 22:45 /etc/test/passwdx
[root@localhost ~]#

8、查找/etc/init.d/目录下，所有用户都有执行权限，且其它用户有写权限的所有文件；

~]# find /etc/init.d -perm -111 -a -perm -002 -type f -ls
~]# find /etc/init.d -perm -113 -type f -ls

```



