# 1、描述GPT是什么，应该怎么使用

### GPT概念：

> GPT的全称是Globally Unique Identifier Partition Table，意即GUID分区表，GUID 分区表 (GPT) 是作为 Extensible Firmware Interface (EFI) 计划的一部分引入的。相对于以往 PC 普遍使用的主引导记录 (MBR) 分区方案，GPT 提供了更加灵活的磁盘分区机制。分区指物理或逻辑磁盘上彼此连接的存储空间，但提供功能时就像物理上分隔的磁盘一样。对于系统固件和已安装的操作系统来说，分区是可见的。操作系统启动之前，对分区的访问由系统固件控制，操作系统启动后则由操作系统控制。

### 优点：

> 1、支持2TB以上的大硬盘；
>
> 2、每个磁盘的分区个数几乎没有限制（Windows系统最多只允许划分128个分区）；
>
> 3、分区大小几乎没有限制。又是一个“几乎”。因为它用64位的整数表示扇区号，即 = 18,446,744,073,709,551,616；
>
> 4、分区表自带备份。在磁盘的首尾部分分别保存了一份相同的分区表，其中一份被破坏后，可以通过另一份恢复；
>
> 5、循环冗余检验值针对关键数据结构而计算，提高了数据崩溃的检测几率；
>
> 6、 虽然MBR提供1字节分区类型代码，但GPT使用一个16字节的全局唯一标识符（GUID）值来标识分区类型，这使分区类型更不容易冲突；
>
> 7、每个分区可以有一个名称(不同于卷标)。

# 2、创建一个10G的分区，并格式化为ext4文件系统。要求：

## (1) block大小为2048，预留空间20%，卷标为MYDATA；

## (2) 挂载至/mydata目录，要求挂载时禁止程序自动运行，且不更新文件的访问时间戳；

## (3) 可开机自动挂载。

**步骤1：创建一个10G分区：`/dev/sda5`**

> ```
> [root@localhost ~]# fdisk /dev/sda
> 
> WARNING: DOS-compatible mode is deprecated. It's strongly recommended to
>          switch off the mode (command 'c') and change display units to
>          sectors (command 'u').
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> 
> Command (m for help): n
> Command action
>    e   extended
>    p   primary partition (1-4)
> e
> Selected partition 4
> First cylinder (9211-15665, default 9211): 
> Using default value 9211
> Last cylinder, +cylinders or +size{K,M,G} (9211-15665, default 15665): 
> Using default value 15665
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> 
> Command (m for help): n
> First cylinder (9211-15665, default 9211): 
> Using default value 9211
> Last cylinder, +cylinders or +size{K,M,G} (9211-15665, default 15665): +10G
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211       10516    10490413+  83  Linux
> 
> Command (m for help): w
> The partition table has been altered!
> 
> Calling ioctl() to re-read partition table.
> 
> WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
> The kernel still uses the old table. The new table will be used at
> the next reboot or after you run partprobe(8) or kpartx(8)
> Syncing disks.
> [root@localhost ~]# cat /proc/partitions 
> major minor  #blocks  name
> 
>    8        0  125829120 sda
>    8        1   61440000 sda1
>    8        2    2048000 sda2
>    8        3   10490301 sda3
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> BLKPG: Device or resource busy
> error adding partition 3
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> BLKPG: Device or resource busy
> error adding partition 3
> BLKPG: Device or resource busy
> error adding partition 4
> BLKPG: Device or resource busy
> error adding partition 5
> [root@localhost ~]# cat /proc/partitions 
> major minor  #blocks  name
> 
>    8        0  125829120 sda
>    8        1   61440000 sda1
>    8        2    2048000 sda2
>    8        3   10490301 sda3
>    8        4         31 sda4
>    8        5   10490413 sda5
> [root@localhost ~]# 
> ```

**步骤2：格式化分区：**

```
[root@localhost ~]# mke2fs -t ext4 -b 2048 -m 20 -L "MYDATA" /dev/sda5
```

> ```
> [root@localhost ~]# mke2fs -t ext4 -b 2048 -m 20 -L "MYDATA" /dev/sda5
> mke2fs 1.41.12 (17-May-2010)
> Filesystem label=MYDATA
> OS type: Linux
> Block size=2048 (log=1)
> Fragment size=2048 (log=1)
> Stride=0 blocks, Stripe width=0 blocks
> 657408 inodes, 5245206 blocks
> 1049041 blocks (20.00%) reserved for the super user
> First data block=0
> Maximum filesystem blocks=543162368
> 321 block groups
> 16384 blocks per group, 16384 fragments per group
> 2048 inodes per group
> Superblock backups stored on blocks: 
> 	16384, 49152, 81920, 114688, 147456, 409600, 442368, 802816, 1327104, 
> 	2048000, 3981312
> 
> Writing inode tables: done                            
> Creating journal (32768 blocks): done
> Writing superblocks and filesystem accounting information: done
> 
> This filesystem will be automatically checked every 32 mounts or
> 180 days, whichever comes first.  Use tune2fs -c or -i to override.
> [root@localhost ~]#
> [root@localhost ~]# tune2fs -l /dev/sda5
> tune2fs 1.41.12 (17-May-2010)
> Filesystem volume name:   MYDATA
> Last mounted on:          <not available>
> Filesystem UUID:          446971c3-97f3-4f46-a9c0-b31e88f01763
> Filesystem magic number:  0xEF53
> Filesystem revision #:    1 (dynamic)
> Filesystem features:      has_journal ext_attr resize_inode dir_index filetype extent flex_bg sparse_super huge_file uninit_bg dir_nlink extra_isize
> Filesystem flags:         signed_directory_hash 
> Default mount options:    (none)
> Filesystem state:         clean
> Errors behavior:          Continue
> Filesystem OS type:       Linux
> Inode count:              657408
> Block count:              5245206
> Reserved block count:     1049041
> Free blocks:              5123382
> Free inodes:              657397
> First block:              0
> Block size:               2048
> Fragment size:            2048
> Reserved GDT blocks:      512
> Blocks per group:         16384
> Fragments per group:      16384
> Inodes per group:         2048
> Inode blocks per group:   256
> Flex block group size:    16
> Filesystem created:       Fri Apr 12 17:52:28 2019
> Last mount time:          n/a
> Last write time:          Fri Apr 12 17:52:35 2019
> Mount count:              0
> Maximum mount count:      32
> Last checked:             Fri Apr 12 17:52:28 2019
> Check interval:           15552000 (6 months)
> Next check after:         Wed Oct  9 17:52:28 2019
> Lifetime writes:          226 MB
> Reserved blocks uid:      0 (user root)
> Reserved blocks gid:      0 (group root)
> First inode:              11
> Inode size:	          256
> Required extra isize:     28
> Desired extra isize:      28
> Journal inode:            8
> Default directory hash:   half_md4
> Directory Hash Seed:      e9e8426a-be96-4af0-a624-25be5c497ffe
> Journal backup:           inode blocks
> [root@localhost ~]# 
> [root@localhost ~]# blkid /dev/sda5
> /dev/sda5: LABEL="MYDATA" UUID="446971c3-97f3-4f46-a9c0-b31e88f01763" TYPE="ext4" 
> [root@localhost ~]# 
> ```

**步骤3：编辑`/etc/fstab`文件：**

```
LABEL="MYDATA"          /mydata         ext4    defaults,noexec,noatime         0 0 
```

> ```
> [root@localhost ~]# ls /mydata
> ls: cannot access /mydata: No such file or directory
> [root@localhost ~]# mkdir /mydata
> [root@localhost ~]# ls /mydata
> [root@localhost ~]#
> [root@localhost ~]# vim /etc/fstab
> #
> # /etc/fstab
> # Created by anaconda on Tue Apr  9 05:47:56 2019
> #
> # Accessible filesystems, by reference, are maintained under '/dev/disk'
> # See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
> #
> UUID=04fe120c-e6ec-4c2e-a7a2-40f855eccfbb /                       ext4    defaults        1 1
> UUID=f384763f-8e6b-49a4-8830-c3503737433e swap                    swap    defaults        0 0
> tmpfs                   /dev/shm                tmpfs   defaults        0 0
> devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
> sysfs                   /sys                    sysfs   defaults        0 0
> proc                    /proc                   proc    defaults        0 0
> 
> #mount /dev/sda5 /mydata
> LABEL="MYDATA"          /mydata         ext4    defaults,noexec,noatime         0 0  
> [root@localhost ~]# mount -a
> [root@localhost ~]# mount | grep "/mydata"
> /dev/sda5 on /mydata type ext4 (rw,noexec,noatime)
> [root@localhost ~]# ls /mydata/
> lost+found
> [root@localhost ~]# df -lh | grep "/mydata"
> /dev/sda5       9.8G   13M  7.8G   1% /mydata
> ```



# 3、创建一个大小为1G的swap分区，并启用

**步骤1：创建一个1G的swap分区：`/dev/sda6`**

> ```
> [root@localhost ~]# fdisk /dev/sda
> 
> WARNING: DOS-compatible mode is deprecated. It's strongly recommended to
>          switch off the mode (command 'c') and change display units to
>          sectors (command 'u').
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211       10516    10490413+  83  Linux
> 
> Command (m for help): n
> First cylinder (10517-15665, default 10517): 
> Using default value 10517
> Last cylinder, +cylinders or +size{K,M,G} (10517-15665, default 15665): +1G
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211       10516    10490413+  83  Linux
> /dev/sda6           10517       10648     1060258+  83  Linux
> 
> Command (m for help): t
> Partition number (1-6): 6
> Hex code (type L to list codes): 82
> Changed system type of partition 6 to 82 (Linux swap / Solaris)
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211       10516    10490413+  83  Linux
> /dev/sda6           10517       10648     1060258+  82  Linux swap / Solaris
> 
> Command (m for help): w
> The partition table has been altered!
> 
> Calling ioctl() to re-read partition table.
> 
> WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
> The kernel still uses the old table. The new table will be used at
> the next reboot or after you run partprobe(8) or kpartx(8)
> Syncing disks.
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> BLKPG: Device or resource busy
> error adding partition 3
> BLKPG: Device or resource busy
> error adding partition 4
> BLKPG: Device or resource busy
> error adding partition 5
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> BLKPG: Device or resource busy
> error adding partition 3
> BLKPG: Device or resource busy
> error adding partition 4
> BLKPG: Device or resource busy
> error adding partition 5
> BLKPG: Device or resource busy
> error adding partition 6
> [root@localhost ~]# cat /proc/partitions 
> major minor  #blocks  name
> 
>    8        0  125829120 sda
>    8        1   61440000 sda1
>    8        2    2048000 sda2
>    8        3   10490301 sda3
>    8        4         31 sda4
>    8        5   10490413 sda5
>    8        6    1060258 sda6
> [root@localhost ~]# 
> ```

**步骤2：格式化：**

```
[root@localhost ~]# mkswap /dev/sda6
```

> ```
> [root@localhost ~]# mkswap /dev/sda6
> Setting up swapspace version 1, size = 1060252 KiB
> no label, UUID=9e8f12cb-a20f-4a9c-8209-35c381a2194b
> [root@localhost ~]# 
> ```

**步骤3：启用：**

```
[root@localhost ~]# swapon /dev/sda6
```

> ```
> [root@localhost ~]# free -m
>              total       used       free     shared    buffers     cached
> Mem:           979        397        582          0         57        195
> -/+ buffers/cache:        143        835
> Swap:         1999          0       1999
> [root@localhost ~]# swapon /dev/sda6
> [root@localhost ~]# free -m
>              total       used       free     shared    buffers     cached
> Mem:           979        397        581          0         57        195
> -/+ buffers/cache:        144        835
> Swap:         3035          0       3035
> [root@localhost ~]# 
> ```



# 4、编写脚本计算/etc/passwd文件中第10个用户和第20个用户id号之和

```
#!/bin/bash
# Version: 0.0.1
# Author: Paul
# Description: The sum of the 10th user and the 20th user id number

id1=$(head -10 /etc/passwd | tail -1 | cut -d: -f3)
echo "the 10th user id number : $id1 "

id2=$(head -20 /etc/passwd | tail -1 | cut -d: -f3)
echo "the 20th user id number : $id2 "

echo
id_sum=$[$id1+$id2]
echo "the user_id_sum is : $id_sum"
```

> ```
> [root@localhost ~]# vim user_id_sum.sh
> #!/bin/bash
> # Version: 0.0.1
> # Author: Paul
> # Description: The sum of the 10th user and the 20th user id number
> 
> id1=$(head -10 /etc/passwd | tail -1 | cut -d: -f3)
> echo "the 10th user id number : $id1 "
> 
> id2=$(head -20 /etc/passwd | tail -1 | cut -d: -f3)
> echo "the 20th user id number : $id2 "
> 
> echo
> id_sum=$[$id1+$id2]
> echo "the user_id_sum is : $id_sum"
> [root@localhost ~]# bash user_id_sum.sh 
> the 10th user id number : 10 
> the 20th user id number : 68 
> 
> the user_id_sum is : 78
> [root@localhost ~]# head -10 /etc/passwd | tail -1
> uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin
> [root@localhost ~]# head -20 /etc/passwd | tail -1
> haldaemon:x:68:68:HAL daemon:/:/sbin/nologin
> [root@localhost ~]# 
> ```



# 5、将当前主机名保存至hostName变量中，主机名如果为空，或者为localhost.localdomain则将设置为www.magedu.com

```
#!/bin/bash
# Version: 0.0.1
# Author: Paul
# Description: hostname testing

hostName=$(hostname)

if [ -z "$hostName" -o "$hostName" == "localhost.localdomain" ]; then
	hostname www.magedu.com
	host_name=$(hostname)
	echo "The host_name has changed to : $host_name "
else
	echo "The host_name is : $hostName "
fi	
```

> ```
> [root@localhost ~]# vim host_test.sh 
> #!/bin/bash
> # Version: 0.0.1
> # Author: Paul
> # Description: hostname testing
> 
> hostName=$(hostname)
> 
> if [ -z "$hostName" -o "$hostName" == "localhost.localdomain" ]; then
>         hostname www.magedu.com
>         host_name=$(hostname)
>         echo "The host_name has changed to : $host_name "
> else
>         echo "The host_name is : $hostName "
> fi
> [root@localhost ~]# bash host_test.sh 
> The host_name has changed to : www.magedu.com 
> [root@localhost ~]# 
> ```



# 6、编写脚本，通过命令行参数传入一个用户名，判断id号是偶数还是奇数

```
#!/bin/bash
# Version: 0.0.1
# Author: Paul
# Description: the id number is even or odd

if [ $# -lt 1 ]; then
        echo "At least one username."
        exit 2
fi


if ! grep "^$1\>" /etc/passwd &> /dev/null; then
        useradd $1
        id_number=$(grep "^$1\>" /etc/passwd | cut -d: -f3)
else
        id_number=$(grep "^$1\>" /etc/passwd | cut -d: -f3)
fi

echo "the user_name is : "
echo "$(id $1)"
echo

if [ $[$id_number%2] -eq 0 ]; then
        echo "user_name_id: $id_number  is even. "
else
        echo "user_name_id: $id_number  is odd. "
fi
```

> ```
> [root@localhost ~]# vim id_number_test.sh
> #!/bin/bash
> # Version: 0.0.1
> # Author: Paul
> # Description: the id number is even or odd
> 
> if [ $# -lt 1 ]; then
>         echo "At least one username."
>         exit 2
> fi
> 
> 
> if ! grep "^$1\>" /etc/passwd &> /dev/null; then
>         useradd $1
>         id_number=$(grep "^$1\>" /etc/passwd | cut -d: -f3)
> else
>         id_number=$(grep "^$1\>" /etc/passwd | cut -d: -f3)
> fi
> 
> echo "the user_name is : "
> echo "$(id $1)"
> echo
> 
> if [ $[$id_number%2] -eq 0 ]; then
>         echo "user_name_id: $id_number  is even. "
> else
>         echo "user_name_id: $id_number  is odd. "
> fi
> [root@localhost ~]# chmod +x id_number_test.sh 
> [root@localhost ~]# ./id_number_test.sh 
> At least one username.
> [root@localhost ~]# echo $?
> 2
> [root@localhost ~]#
> [root@localhost ~]# id archlinux
> uid=1000(archlinux) gid=1000(archlinux) groups=1000(archlinux)
> [root@localhost ~]# ./id_number_test.sh archlinux
> the user_name is : 
> uid=1000(archlinux) gid=1000(archlinux) groups=1000(archlinux)
> 
> user_name_id: 1000  is even. 
> [root@localhost ~]#
> [root@localhost ~]# id suse
> id: suse: No such user
> [root@localhost ~]# ./id_number_test.sh suse
> the user_name is : 
> uid=1003(suse) gid=1003(suse) groups=1003(suse)
> 
> user_name_id: 1003  is odd.
> [root@localhost ~]#
> ```



# 7、lvm基本应用以及扩展缩减实现

### 基本概念：

> LVM：Logical Volume Manager，使用的是内核中的dm模块；
>
> dm：device mapper, 将一个或多个底层块设备组织成一个逻辑设备的模块；
>
> lv设备所在的真正位置：`/dev/dm-#`，#表示数字；
>
> ​	同时为了方便使用，还有2个符号链接：
>
> ​		`/dev/mapper/VG_NAME-LV_NAME`
>
> ​			如：`/dev/mapper/centos-root`，表示：`centos`卷组上的一个叫做`root`的逻辑卷；
>
> ​		`/dev/VG_NAME/LV_NAME`
>
> ​			如：`/dev/centos/root`

> ```
> [root@localhost ~]# ls -l /dev/mapper/
> total 0
> lrwxrwxrwx. 1 root root       7 Apr 12 10:19 centos-home -> ../dm-2
> lrwxrwxrwx. 1 root root       7 Apr 12 10:19 centos-root -> ../dm-0
> lrwxrwxrwx. 1 root root       7 Apr 12 10:19 centos-swap -> ../dm-1
> crw-------. 1 root root 10, 236 Apr 12 10:19 control
> [root@localhost ~]# ls -l /dev/centos/
> total 0
> lrwxrwxrwx. 1 root root 7 Apr 12 10:19 home -> ../dm-2
> lrwxrwxrwx. 1 root root 7 Apr 12 10:19 root -> ../dm-0
> lrwxrwxrwx. 1 root root 7 Apr 12 10:19 swap -> ../dm-1
> [root@localhost ~]# ls -l /dev/dm-*
> brw-rw----. 1 root disk 253, 0 Apr 12 10:19 /dev/dm-0
> brw-rw----. 1 root disk 253, 1 Apr 12 10:19 /dev/dm-1
> brw-rw----. 1 root disk 253, 2 Apr 12 10:19 /dev/dm-2
> ```

### 创建和管理：

#### pv管理工具：

> `pvs`：简要pv信息显示
>
> `pvdisplay`：显示pv的详细信息
>
> `pvcreate /dev/DEVICE`：创建pv
>
> `pvremove /dev/DEVICE`：删除pv

> **创建3个LVM分区，`/dev/sda{3,5,6}`：**
>
> ```
> [root@localhost ~]# fdisk /dev/sda
> 
> WARNING: DOS-compatible mode is deprecated. It's strongly recommended to
>          switch off the mode (command 'c') and change display units to
>          sectors (command 'u').
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> 
> Command (m for help): n
> Command action
>    e   extended
>    p   primary partition (1-4)
> p
> Partition number (1-4): 3
> First cylinder (7905-15665, default 7905): 
> Using default value 7905
> Last cylinder, +cylinders or +size{K,M,G} (7905-15665, default 15665): +10G
> 
> Command (m for help): n
> Command action
>    e   extended
>    p   primary partition (1-4)
> e
> Selected partition 4
> First cylinder (9211-15665, default 9211): 
> Using default value 9211
> Last cylinder, +cylinders or +size{K,M,G} (9211-15665, default 15665): 
> Using default value 15665
> 
> Command (m for help): n
> First cylinder (9211-15665, default 9211): 
> Using default value 9211
> Last cylinder, +cylinders or +size{K,M,G} (9211-15665, default 15665): +5G
> 
> Command (m for help): n
> First cylinder (9865-15665, default 9865): 
> Using default value 9865
> Last cylinder, +cylinders or +size{K,M,G} (9865-15665, default 15665): +8G
> 
> Command (m for help): p
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   83  Linux
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211        9864     5253223+  83  Linux
> /dev/sda6            9865       10909     8393931   83  Linux
> 
> Command (m for help): m
> Command action
>    a   toggle a bootable flag
>    b   edit bsd disklabel
>    c   toggle the dos compatibility flag
>    d   delete a partition
>    l   list known partition types
>    m   print this menu
>    n   add a new partition
>    o   create a new empty DOS partition table
>    p   print the partition table
>    q   quit without saving changes
>    s   create a new empty Sun disklabel
>    t   change a partition's system id
>    u   change display/entry units
>    v   verify the partition table
>    w   write table to disk and exit
>    x   extra functionality (experts only)
> 
> Command (m for help): l
> 
>  0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris        
>  1  FAT12           39  Plan 9          82  Linux swap / So c1  DRDOS/sec (FAT-
>  2  XENIX root      3c  PartitionMagic  83  Linux           c4  DRDOS/sec (FAT-
>  3  XENIX usr       40  Venix 80286     84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
>  4  FAT16 <32M      41  PPC PReP Boot   85  Linux extended  c7  Syrinx         
>  5  Extended        42  SFS             86  NTFS volume set da  Non-FS data    
>  6  FAT16           4d  QNX4.x          87  NTFS volume set db  CP/M / CTOS / .
>  7  HPFS/NTFS       4e  QNX4.x 2nd part 88  Linux plaintext de  Dell Utility   
>  8  AIX             4f  QNX4.x 3rd part 8e  Linux LVM       df  BootIt         
>  9  AIX bootable    50  OnTrack DM      93  Amoeba          e1  DOS access     
>  a  OS/2 Boot Manag 51  OnTrack DM6 Aux 94  Amoeba BBT      e3  DOS R/O        
>  b  W95 FAT32       52  CP/M            9f  BSD/OS          e4  SpeedStor      
>  c  W95 FAT32 (LBA) 53  OnTrack DM6 Aux a0  IBM Thinkpad hi eb  BeOS fs        
>  e  W95 FAT16 (LBA) 54  OnTrackDM6      a5  FreeBSD         ee  GPT            
>  f  W95 Ext'd (LBA) 55  EZ-Drive        a6  OpenBSD         ef  EFI (FAT-12/16/
> 10  OPUS            56  Golden Bow      a7  NeXTSTEP        f0  Linux/PA-RISC b
> 11  Hidden FAT12    5c  Priam Edisk     a8  Darwin UFS      f1  SpeedStor      
> 12  Compaq diagnost 61  SpeedStor       a9  NetBSD          f4  SpeedStor      
> 14  Hidden FAT16 <3 63  GNU HURD or Sys ab  Darwin boot     f2  DOS secondary  
> 16  Hidden FAT16    64  Novell Netware  af  HFS / HFS+      fb  VMware VMFS    
> 17  Hidden HPFS/NTF 65  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE 
> 18  AST SmartSleep  70  DiskSecure Mult b8  BSDI swap       fd  Linux raid auto
> 1b  Hidden W95 FAT3 75  PC/IX           bb  Boot Wizard hid fe  LANstep        
> 1c  Hidden W95 FAT3 80  Old Minix       be  Solaris boot    ff  BBT            
> 1e  Hidden W95 FAT1
> 
> Command (m for help): t
> Partition number (1-6): 3
> Hex code (type L to list codes): 8e
> Changed system type of partition 3 to 8e (Linux LVM)
> 
> Command (m for help): t
> Partition number (1-6): 5
> Hex code (type L to list codes): 8e
> Changed system type of partition 5 to 8e (Linux LVM)
> 
> Command (m for help): t
> Partition number (1-6): 6
> Hex code (type L to list codes): 8e
> Changed system type of partition 6 to 8e (Linux LVM)
> 
> Command (m for help): w
> The partition table has been altered!
> 
> Calling ioctl() to re-read partition table.
> 
> WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
> The kernel still uses the old table. The new table will be used at
> the next reboot or after you run partprobe(8) or kpartx(8)
> Syncing disks.
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> [root@localhost ~]# partx -a /dev/sda
> BLKPG: Device or resource busy
> error adding partition 1
> BLKPG: Device or resource busy
> error adding partition 2
> BLKPG: Device or resource busy
> error adding partition 3
> BLKPG: Device or resource busy
> error adding partition 4
> BLKPG: Device or resource busy
> error adding partition 5
> BLKPG: Device or resource busy
> error adding partition 6
> [root@localhost ~]# 
> [root@localhost ~]# fdisk -l
> 
> Disk /dev/sda: 128.8 GB, 128849018880 bytes
> 255 heads, 63 sectors/track, 15665 cylinders
> Units = cylinders of 16065 * 512 = 8225280 bytes
> Sector size (logical/physical): 512 bytes / 512 bytes
> I/O size (minimum/optimal): 512 bytes / 512 bytes
> Disk identifier: 0x0006b0aa
> 
>    Device Boot      Start         End      Blocks   Id  System
> /dev/sda1   *           1        7650    61440000   83  Linux
> /dev/sda2            7650        7905     2048000   82  Linux swap / Solaris
> /dev/sda3            7905        9210    10490301   8e  Linux LVM
> /dev/sda4            9211       15665    51849787+   5  Extended
> /dev/sda5            9211        9864     5253223+  8e  Linux LVM
> /dev/sda6            9865       10909     8393931   8e  Linux LVM
> [root@localhost ~]# 
> ```
>
> **创建、显示和删除pv：**
>
> ```
> [root@localhost ~]# pvcreate /dev/sda3
>   Physical volume "/dev/sda3" successfully created
> [root@localhost ~]# pvs
>   PV         VG   Fmt  Attr PSize  PFree 
>   /dev/sda3       lvm2 ---- 10.00g 10.00g
> [root@localhost ~]# pvdisplay 
>   "/dev/sda3" is a new physical volume of "10.00 GiB"
>   --- NEW Physical volume ---
>   PV Name               /dev/sda3
>   VG Name               
>   PV Size               10.00 GiB
>   Allocatable           NO
>   PE Size               0   
>   Total PE              0
>   Free PE               0
>   Allocated PE          0
>   PV UUID               v73WLL-tb4M-HktQ-2bdN-xLuj-1D6z-2Lxuzr
>    
> [root@localhost ~]# pvdisplay /dev/sda3
>   "/dev/sda3" is a new physical volume of "10.00 GiB"
>   --- NEW Physical volume ---
>   PV Name               /dev/sda3
>   VG Name               
>   PV Size               10.00 GiB
>   Allocatable           NO
>   PE Size               0						//PE大小只有当pv加入vg后才能确定   
>   Total PE              0
>   Free PE               0
>   Allocated PE          0
>   PV UUID               v73WLL-tb4M-HktQ-2bdN-xLuj-1D6z-2Lxuzr
>    
> [root@localhost ~]# pvremove /dev/sda3
>   Labels on physical volume "/dev/sda3" successfully wiped
> [root@localhost ~]# pvs
> [root@localhost ~]# pvdisplay 
> [root@localhost ~]# pvcreate /dev/sda3
>   Physical volume "/dev/sda3" successfully created
> [root@localhost ~]# 
> ```

#### vg管理工具：

> `vgs`：简要vg信息显示
>
> `vgdisplay`：显示vg的详细信息
>
> `vgcreate [-s #[kKmMgGtTpPeE]] VolumeGroupName PhysicalDevicePath [PhysicalDevicePath...]`：创建vg，-s 是用来指定PE大小
>
> `vgextend VolumeGroupName PhysicalDevicePath [PhysicalDevicePath...]`：扩展vg
>
> `vgreduce VolumeGroupName PhysicalDevicePath [PhysicalDevicePath...]`：缩减vg
>
> **注：使用`vgreduce`缩减vg时需要先做`pvmove`，即先要移动pv上的PE至同一个卷组中的其它pv上。**

> **创建和显示卷组：**
>
> ```
> [root@localhost ~]# vgcreate myvg /dev/sda3
>   Volume group "myvg" successfully created
> [root@localhost ~]# vgdisplay myvg
>   --- Volume group ---
>   VG Name               myvg
>   System ID             
>   Format                lvm2
>   Metadata Areas        1
>   Metadata Sequence No  1
>   VG Access             read/write
>   VG Status             resizable
>   MAX LV                0
>   Cur LV                0
>   Open LV               0
>   Max PV                0
>   Cur PV                1
>   Act PV                1
>   VG Size               10.00 GiB
>   PE Size               4.00 MiB
>   Total PE              2560
>   Alloc PE / Size       0 / 0   
>   Free  PE / Size       2560 / 10.00 GiB
>   VG UUID               z7JdcM-Pi7K-4ZEO-Q5Ds-EVCA-0T05-bPtnue
>    
> [root@localhost ~]# pvdisplay /dev/sda3
>   --- Physical volume ---
>   PV Name               /dev/sda3
>   VG Name               myvg
>   PV Size               10.00 GiB / not usable 4.43 MiB
>   Allocatable           yes 
>   PE Size               4.00 MiB   			//加入卷组myvg后 PE才被确定下来
>   Total PE              2560
>   Free PE               2560
>   Allocated PE          0
>   PV UUID               vhO4t8-agtu-QN3Z-01yN-tAhu-kHyM-UntsHk
>    
> [root@localhost ~]# 
> ```
>
> **扩展和缩减卷组：**
>
> ```
> [root@localhost ~]# pvs
>   PV         VG   Fmt  Attr PSize  PFree 
>   /dev/sda3  myvg lvm2 a--u 10.00g 10.00g
> [root@localhost ~]# pvcreate /dev/sda5
>   Physical volume "/dev/sda5" successfully created
> [root@localhost ~]# vgextend myvg /dev/sda5
>   Volume group "myvg" successfully extended
> [root@localhost ~]# vgdisplay myvg
>   --- Volume group ---
>   VG Name               myvg
>   System ID             
>   Format                lvm2
>   Metadata Areas        2
>   Metadata Sequence No  2
>   VG Access             read/write
>   VG Status             resizable
>   MAX LV                0
>   Cur LV                0
>   Open LV               0
>   Max PV                0
>   Cur PV                2
>   Act PV                2
>   VG Size               15.01 GiB
>   PE Size               4.00 MiB
>   Total PE              3842
>   Alloc PE / Size       0 / 0   
>   Free  PE / Size       3842 / 15.01 GiB
>   VG UUID               z7JdcM-Pi7K-4ZEO-Q5Ds-EVCA-0T05-bPtnue
>    
> [root@localhost ~]# 
> [root@localhost ~]# pvmove /dev/sda5			//先要做 pvmove
>   No data to move for myvg
> [root@localhost ~]# vgreduce myvg /dev/sda5
>   Removed "/dev/sda5" from volume group "myvg"
> [root@localhost ~]# vgdisplay myvg
>   --- Volume group ---
>   VG Name               myvg
>   System ID             
>   Format                lvm2
>   Metadata Areas        1
>   Metadata Sequence No  3
>   VG Access             read/write
>   VG Status             resizable
>   MAX LV                0
>   Cur LV                0
>   Open LV               0
>   Max PV                0
>   Cur PV                1
>   Act PV                1
>   VG Size               10.00 GiB
>   PE Size               4.00 MiB
>   Total PE              2560
>   Alloc PE / Size       0 / 0   
>   Free  PE / Size       2560 / 10.00 GiB
>   VG UUID               z7JdcM-Pi7K-4ZEO-Q5Ds-EVCA-0T05-bPtnue
>    
> [root@localhost ~]# 
> ```

#### lv管理工具：

> `lvs`：简要lv信息显示
>
> `lvdisplay`：显示lv的详细信息
>
> `lvcreate -L #[mMgGtT] -n NAME VolumeGroup`：创建逻辑卷，-L 指明大小，-n 指明逻辑卷名字
>
> `lvremove /dev/VG_NAME/LV_NAME`：删除逻辑卷

> **逻辑卷的创建及使用：**
>
> ```
> [root@localhost ~]# lvcreate -L 2G -n mylv myvg
>   Logical volume "mylv" created.
> [root@localhost ~]# ls /dev/mapper/
> control  myvg-mylv
> [root@localhost ~]# mke2fs -t ext4 -b 1024 -L MYLV /dev/myvg/mylv 
> mke2fs 1.41.12 (17-May-2010)
> Filesystem label=MYLV
> OS type: Linux
> Block size=1024 (log=0)
> Fragment size=1024 (log=0)
> Stride=0 blocks, Stripe width=0 blocks
> 131072 inodes, 2097152 blocks
> 104857 blocks (5.00%) reserved for the super user
> First data block=1
> Maximum filesystem blocks=69206016
> 256 block groups
> 8192 blocks per group, 8192 fragments per group
> 512 inodes per group
> Superblock backups stored on blocks: 
> 	8193, 24577, 40961, 57345, 73729, 204801, 221185, 401409, 663553, 
> 	1024001, 1990657
> 
> Writing inode tables: done                            
> Creating journal (32768 blocks): done
> Writing superblocks and filesystem accounting information: done
> 
> This filesystem will be automatically checked every 37 mounts or
> 180 days, whichever comes first.  Use tune2fs -c or -i to override.
> [root@localhost ~]# mkdir /backup
> [root@localhost ~]# mount /dev/myvg/mylv /backup
> [root@localhost ~]# ls -l /backup/
> total 12
> drwx------. 2 root root 12288 Apr 13 16:35 lost+found
> [root@localhost ~]# mount
> /dev/sda1 on / type ext4 (rw)
> proc on /proc type proc (rw)
> sysfs on /sys type sysfs (rw)
> devpts on /dev/pts type devpts (rw,gid=5,mode=620)
> tmpfs on /dev/shm type tmpfs (rw,rootcontext="system_u:object_r:tmpfs_t:s0")
> none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
> /dev/mapper/myvg-mylv on /backup type ext4 (rw)
> [root@localhost ~]# cd /backup/
> [root@localhost backup]# cp /etc/issue /backup/
> [root@localhost backup]# cp /etc/grub.conf /backup/
> [root@localhost backup]# ls
> grub.conf  issue  lost+found
> [root@localhost backup]# cat issue 
> CentOS release 6.10 (Final)
> Kernel \r on an \m
> 
> [root@localhost backup]# 
> ```

##### 扩展逻辑卷：

> **步骤：**
>
> 1、`lvextend -L [+]#[mMgGtT] /dev/VG_NAME/LV_NAME`：先扩展物理边界
>
> 2、`resize2fs /dev/VG_NAME/LV_NAME`：然后扩展逻辑边界（即文件系统）

> ```
> [root@localhost ~]# lvextend -L 5G /dev/myvg/mylv 
>   Size of logical volume myvg/mylv changed from 2.00 GiB (512 extents) to 5.00 GiB (1280 extents).
>   Logical volume mylv successfully resized.
> [root@localhost ~]# df -lh
> Filesystem            Size  Used Avail Use% Mounted on
> /dev/sda1              58G  2.3G   53G   5% /
> tmpfs                 490M     0  490M   0% /dev/shm
> /dev/mapper/myvg-mylv
>                       2.0G  3.1M  1.9G   1% /backup
> [root@localhost ~]# umount /backup/
> [root@localhost ~]# mount /dev/myvg/mylv /backup
> [root@localhost ~]# df -lh
> Filesystem            Size  Used Avail Use% Mounted on
> /dev/sda1              58G  2.3G   53G   5% /
> tmpfs                 490M     0  490M   0% /dev/shm
> /dev/mapper/myvg-mylv
>                       2.0G  3.1M  1.9G   1% /backup
> [root@localhost ~]# resize2fs /dev/myvg/mylv 
> resize2fs 1.41.12 (17-May-2010)
> Filesystem at /dev/myvg/mylv is mounted on /backup; on-line resizing required
> old desc_blocks = 8, new_desc_blocks = 20
> Performing an on-line resize of /dev/myvg/mylv to 5242880 (1k) blocks.
> The filesystem on /dev/myvg/mylv is now 5242880 blocks long.
> 
> [root@localhost ~]# df -lh
> Filesystem            Size  Used Avail Use% Mounted on
> /dev/sda1              58G  2.3G   53G   5% /
> tmpfs                 490M     0  490M   0% /dev/shm
> /dev/mapper/myvg-mylv
>                       4.9G  3.4M  4.7G   1% /backup
> [root@localhost ~]# 
> ```

##### 缩减逻辑卷：

> **步骤：**
>
> 1、`umount /dev/VG_NAME/LV_NAME`：先卸载文件系统
>
> 2、`e2fsck -f /dev/VG_NAME/LV_NAME`：做文件系统的强制检测和修复
>
> 3、`resize2fs /dev/VG_NAME/LV_NAME #[mMgGtT]`：缩减逻辑边界，并指明缩减至多大
>
> 4、`lvreduce -L [-]#[mMgGtT] /dev/VG_NAME/LV_NAME`：缩减逻辑卷
>
> 5、`mount`：挂载使用

> ```
> [root@localhost ~]# umount /dev/myvg/mylv 
> [root@localhost ~]# e2fsck -f /dev/myvg/mylv
> e2fsck 1.41.12 (17-May-2010)
> Pass 1: Checking inodes, blocks, and sizes
> Pass 2: Checking directory structure
> Pass 3: Checking directory connectivity
> Pass 4: Checking reference counts
> Pass 5: Checking group summary information
> MYLV: 13/327680 files (0.0% non-contiguous), 119695/5242880 blocks
> [root@localhost ~]# resize2fs /dev/myvg/mylv 3G
> resize2fs 1.41.12 (17-May-2010)
> Resizing the filesystem on /dev/myvg/mylv to 3145728 (1k) blocks.
> The filesystem on /dev/myvg/mylv is now 3145728 blocks long.
> 
> [root@localhost ~]# lvreduce -L 3G /dev/myvg/mylv 
>   WARNING: Reducing active logical volume to 3.00 GiB.
>   THIS MAY DESTROY YOUR DATA (filesystem etc.)
> Do you really want to reduce myvg/mylv? [y/n]: y
>   Size of logical volume myvg/mylv changed from 5.00 GiB (1280 extents) to 3.00 GiB (768 extents).
>   Logical volume mylv successfully resized.
> [root@localhost ~]# mount /dev/myvg/mylv /backup
> [root@localhost ~]# df -lh 
> Filesystem            Size  Used Avail Use% Mounted on
> /dev/sda1              58G  2.3G   53G   5% /
> tmpfs                 490M     0  490M   0% /dev/shm
> /dev/mapper/myvg-mylv
>                       3.0G  3.3M  2.8G   1% /backup
> [root@localhost ~]# cd /backup/
> [root@localhost backup]# ls
> grub.conf  issue  lost+found
> [root@localhost backup]# cat issue 
> CentOS release 6.10 (Final)
> Kernel \r on an \m
> 
> [root@localhost backup]# cat grub.conf 
> # grub.conf generated by anaconda
> #
> # Note that you do not have to rerun grub after making changes to this file
> # NOTICE:  You do not have a /boot partition.  This means that
> #          all kernel and initrd paths are relative to /, eg.
> #          root (hd0,0)
> #          kernel /boot/vmlinuz-version ro root=/dev/sda1
> #          initrd /boot/initrd-[generic-]version.img
> #boot=/dev/sda
> default=0
> timeout=5
> splashimage=(hd0,0)/boot/grub/splash.xpm.gz
> hiddenmenu
> title CentOS 6 (2.6.32-754.el6.x86_64)
> 	root (hd0,0)
> 	kernel /boot/vmlinuz-2.6.32-754.el6.x86_64 ro root=UUID=04fe120c-e6ec-4c2e-a7a2-40f855eccfbb rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet
> 	initrd /boot/initramfs-2.6.32-754.el6.x86_64.img
> [root@localhost backup]# 
> ```

### 快照：snapshot，主要用来做备份

> `lvcreate -L #[mMgGtT] -p r -s -n snapshot_lv_name original_lv_name`：-L 指明大小，-p r 表示只读权限，-s 表示快照，-n 指明快照卷名字

> ```
> [root@localhost ~]# lvcreate -s -L 512M -n mylv-snap -p r /dev/myvg/mylv 
>   Logical volume "mylv-snap" created.
> [root@localhost ~]# ls -l /dev/myvg/
> total 0
> lrwxrwxrwx. 1 root root 7 Apr 13 18:25 mylv -> ../dm-0
> lrwxrwxrwx. 1 root root 7 Apr 13 18:25 mylv-snap -> ../dm-3
> [root@localhost ~]# mount /dev/myvg/mylv-snap /mnt
> mount: block device /dev/mapper/myvg-mylv--snap is write-protected, mounting read-only
> [root@localhost ~]# cd /mnt/
> [root@localhost mnt]# ls
> grub.conf  issue  lost+found
> [root@localhost mnt]# cat issue 
> CentOS release 6.10 (Final)
> Kernel \r on an \m
> 
> [root@localhost mnt]# vim /backup/issue 
> [root@localhost mnt]# cat /backup/issue
> CentOS release 6.10 (Final)
> Kernel \r on an \m
> 
> New Line.
> [root@localhost mnt]# pwd
> /mnt
> [root@localhost mnt]# cat issue 
> CentOS release 6.10 (Final)
> Kernel \r on an \m
> 
> [root@localhost mnt]# cp /etc/rc.d/init.d/functions /backup/
> [root@localhost mnt]# ls /backup/functions 
> /backup/functions
> [root@localhost mnt]# ls 
> grub.conf  issue  lost+found
> [root@localhost mnt]# cp -a /mnt/{grub.conf,issue} /tmp			//做备份操作
> [root@localhost mnt]# cd 
> [root@localhost ~]# 
> [root@localhost ~]# umount /mnt
> [root@localhost ~]# lvremove /dev/myvg/mylv-snap			//删除快照卷 
> Do you really want to remove active logical volume mylv-snap? [y/n]: y
>   Logical volume "mylv-snap" successfully removed
> [root@localhost ~]# ls -l /dev/myvg/
> total 0
> lrwxrwxrwx. 1 root root 7 Apr 13 18:33 mylv -> ../dm-0
> [root@localhost ~]# 
> ```

**演示lvm的所有删除：**

> ```
> [root@localhost ~]# mount
> /dev/sda1 on / type ext4 (rw)
> proc on /proc type proc (rw)
> sysfs on /sys type sysfs (rw)
> devpts on /dev/pts type devpts (rw,gid=5,mode=620)
> tmpfs on /dev/shm type tmpfs (rw,rootcontext="system_u:object_r:tmpfs_t:s0")
> none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
> /dev/mapper/myvg-mylv on /backup type ext4 (rw)
> [root@localhost ~]# umount /backup
> [root@localhost ~]# lvremove /dev/myvg/mylv 
> Do you really want to remove active logical volume mylv? [y/n]: y
>   Logical volume "mylv" successfully removed
> [root@localhost ~]# lvs
> [root@localhost ~]# vgremove myvg
>   Volume group "myvg" successfully removed
> [root@localhost ~]# vgs
> [root@localhost ~]# pvremove /dev/sda3
>   Labels on physical volume "/dev/sda3" successfully wiped
> [root@localhost ~]# pvremove /dev/sda5
>   Labels on physical volume "/dev/sda5" successfully wiped
> [root@localhost ~]# pvs
> [root@localhost ~]# 
> ```

